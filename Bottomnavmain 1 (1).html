<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Special+Elite&display=swap" rel="stylesheet">
    <title>SchoolUp - Schule wird zum Spiel</title>
    <style>
    
    
    
/* =========================
   DARK MODE CSS STYLES
   ========================= */

/* Dark Mode Root Variables */
:root {
    --dark-bg-primary: #0f172a;
    --dark-bg-secondary: #1e293b;
    --dark-bg-tertiary: #334155;
    --dark-text-primary: #f8fafc;
    --dark-text-secondary: #e2e8f0;
    --dark-text-muted: #94a3b8;
    --dark-border: #334155;
    --dark-border-light: #475569;
    --dark-accent: #7c3aed;
    --dark-accent-hover: #6d28d9;
    --dark-success: #10b981;
    --dark-warning: #f59e0b;
    --dark-error: #ef4444;
    --dark-card-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
    --dark-card-shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.6);
}

/* Dark Mode Base Styles */
body.dark-mode {
    background: var(--dark-bg-primary);
    color: var(--dark-text-primary);
}

/* Navigation Dark Mode */
body.dark-mode .navbar {
    background: var(--dark-bg-secondary);
    border-bottom: 1px solid var(--dark-border);
    box-shadow: 0 2px 20px rgba(0,0,0,0.3);
}

body.dark-mode .logo-text {
    color: var(--dark-accent);
}

body.dark-mode .nav-button {
    color: var(--dark-text-muted);
    background: transparent;
}

body.dark-mode .nav-button:hover {
    background: var(--dark-bg-tertiary);
    color: var(--dark-text-primary);
}

body.dark-mode .nav-button.active {
    background: rgba(124, 58, 237, 0.2);
    color: var(--dark-accent);
}

body.dark-mode .mobile-nav {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
    box-shadow: var(--dark-card-shadow);
}

/* Cards Dark Mode */
body.dark-mode .card {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
    box-shadow: var(--dark-card-shadow);
}



body.dark-mode .card:hover {
    box-shadow: var(--dark-card-shadow-hover);
}



/* Attendance Status Display Dark Mode */
body.dark-mode .attendance-status-display {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
    color: var(--dark-text-primary);
    box-shadow: var(--dark-card-shadow);
}

body.dark-mode .attendance-status-display:hover {
    background: var(--dark-bg-tertiary);
    box-shadow: var(--dark-card-shadow-hover);
}

/* Falls es Child-Elemente gibt, hier einige häufige Varianten */
body.dark-mode .attendance-status-display .status-text {
    color: var(--dark-text-secondary);
}

body.dark-mode .attendance-status-display .status-value {
    color: var(--dark-text-primary);
}

body.dark-mode .attendance-status-display .status-label {
    color: var(--dark-text-muted);
}

/* Status-spezifische Farben für Dark Mode */
body.dark-mode .attendance-status-display.present {
    border-left: 4px solid var(--dark-success);
    background: rgba(16, 185, 129, 0.1);
}

body.dark-mode .attendance-status-display.absent {
    border-left: 4px solid var(--dark-error);
    background: rgba(239, 68, 68, 0.1);
}

body.dark-mode .attendance-status-display.late {
    border-left: 4px solid var(--dark-warning);
    background: rgba(245, 158, 11, 0.1);
}

body.dark-mode .attendance-status-display.excused {
    border-left: 4px solid var(--dark-accent);
    background: rgba(124, 58, 237, 0.1);
}

/* Smooth transition für die attendance-status-display Klasse */
.attendance-status-display {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
}




/* Hero Card Dark Mode */
body.dark-mode .hero-card {
    background: linear-gradient(135deg, #4c1d95 0%, #1e1b4b 100%);
    border: 1px solid rgba(124, 58, 237, 0.3);
}

body.dark-mode .hero-card::before {
    background: rgba(124, 58, 237, 0.1);
}

/* Stats Grid Dark Mode */
body.dark-mode .stat-card {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
    box-shadow: var(--dark-card-shadow);
}

body.dark-mode .stat-card:hover {
    background: var(--dark-bg-tertiary);
    transform: translateY(-2px);
    box-shadow: var(--dark-card-shadow-hover);
}

body.dark-mode .stat-value {
    color: var(--dark-text-primary);
}

body.dark-mode .stat-label {
    color: var(--dark-text-muted);
}

/* Section Titles */
body.dark-mode .section-title {
    color: var(--dark-text-primary);
}

body.dark-mode .hero-title {
    color: var(--dark-text-primary);
}

/* Widget Grid Dark Mode */
body.dark-mode .calendar-widget,
body.dark-mode .checkin-widget,
body.dark-mode .quickstats-widget {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
    box-shadow: var(--dark-card-shadow);
}

body.dark-mode .calendar-title,
body.dark-mode .checkin-title,
body.dark-mode .quickstats-title {
    color: var(--dark-text-primary);
}

/* Quote Widget Dark Mode */
body.dark-mode .quote-widget {
    background: linear-gradient(135deg, var(--dark-bg-secondary) 0%, var(--dark-bg-tertiary) 100%);
    border: 1px solid var(--dark-border);
}

body.dark-mode .quote-widget::before {
    color: var(--dark-border-light);
}

body.dark-mode .quote-text {
    color: var(--dark-text-secondary);
}

body.dark-mode .quote-author {
    color: var(--dark-accent);
}

body.dark-mode .quote-refresh {
    color: var(--dark-text-muted);
}

body.dark-mode .quote-refresh:hover {
    color: var(--dark-accent);
}

/* Calendar Dark Mode */
body.dark-mode .calendar-header {
    color: var(--dark-text-primary);
}

body.dark-mode .calendar-nav-btn {
    background: var(--dark-bg-tertiary);
    color: var(--dark-text-muted);
    border: 1px solid var(--dark-border);
}

body.dark-mode .calendar-nav-btn:hover {
    background: var(--dark-border);
    color: var(--dark-text-primary);
}

body.dark-mode .calendar-day-header {
    color: var(--dark-text-muted);
}

body.dark-mode .calendar-day {
    color: var(--dark-text-secondary);
}

body.dark-mode .calendar-day:hover {
    background: var(--dark-bg-tertiary);
}

body.dark-mode .calendar-day.today {
    background: var(--dark-accent);
    color: white;
}

body.dark-mode .upcoming-title {
    color: var(--dark-text-primary);
}

body.dark-mode .event-item {
    background: var(--dark-bg-tertiary);
}

body.dark-mode .event-item:hover {
    background: var(--dark-border);
}

body.dark-mode .event-text {
    color: var(--dark-text-secondary);
}

/* Mood Selector Dark Mode */
body.dark-mode .mood-option {
    background: var(--dark-bg-tertiary);
    border: 2px solid transparent;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

body.dark-mode .mood-option:hover {
    background: var(--dark-border);
    box-shadow: 0 4px 12px rgba(0,0,0,0.4);
}

body.dark-mode .mood-option.selected {
    background: rgba(124, 58, 237, 0.2);
    border-color: var(--dark-accent);
}

body.dark-mode .mood-label {
    color: var(--dark-text-secondary);
}

body.dark-mode .mood-option.selected .mood-label {
    color: var(--dark-accent);
}

/* Form Elements Dark Mode */
body.dark-mode .quick-note,
body.dark-mode .feedback-input,
body.dark-mode .form-input {
    background: var(--dark-bg-tertiary);
    border: 2px solid var(--dark-border);
    color: var(--dark-text-primary);
}

body.dark-mode .quick-note:focus,
body.dark-mode .feedback-input:focus,
body.dark-mode .form-input:focus {
    border-color: var(--dark-accent);
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
}

body.dark-mode .quick-note::placeholder,
body.dark-mode .feedback-input::placeholder,
body.dark-mode .form-input::placeholder {
    color: var(--dark-text-muted);
}

/* Buttons Dark Mode */
body.dark-mode .checkin-submit,
body.dark-mode .btn-primary,
body.dark-mode .button-primary {
    background: var(--dark-accent);
    color: white;
}

body.dark-mode .checkin-submit:hover:not(:disabled),
body.dark-mode .btn-primary:hover:not(:disabled),
body.dark-mode .button-primary:hover {
    background: var(--dark-accent-hover);
}

body.dark-mode .btn-secondary,
body.dark-mode .button-secondary {
    background: var(--dark-bg-tertiary);
    color: var(--dark-text-secondary);
    border: 2px solid var(--dark-border);
}

body.dark-mode .btn-secondary:hover:not(:disabled),
body.dark-mode .button-secondary:hover {
    background: var(--dark-border);
    color: var(--dark-text-primary);
}

/* Stats Row Dark Mode */
body.dark-mode .stats-row {
    border-bottom: 1px solid var(--dark-border);
}

body.dark-mode .stat-name {
    color: var(--dark-text-secondary);
}

body.dark-mode .stat-value {
    color: var(--dark-text-primary);
}

/* Activity Feed Dark Mode */
body.dark-mode .activity-item.reflection {
    background: rgba(16, 185, 129, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.2);
}

body.dark-mode .activity-item.grade {
    background: rgba(59, 130, 246, 0.1);
    border: 1px solid rgba(59, 130, 246, 0.2);
}

body.dark-mode .activity-item.level {
    background: rgba(124, 58, 237, 0.1);
    border: 1px solid rgba(124, 58, 237, 0.2);
}

/* Next Lesson Widget Dark Mode */
body.dark-mode .next-lesson-widget {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
    box-shadow: var(--dark-card-shadow);
}

body.dark-mode .next-lesson-widget::before {
    background: linear-gradient(90deg, var(--dark-accent) 0%, #3b82f6 100%);
}

body.dark-mode .next-lesson-title {
    color: var(--dark-text-primary);
}

body.dark-mode .time-indicator {
    background: rgba(124, 58, 237, 0.2);
    color: var(--dark-accent);
    border: 1px solid rgba(124, 58, 237, 0.3);
}

body.dark-mode .lesson-info {
    background: rgba(245, 158, 11, 0.1);
    border-left-color: var(--dark-warning);
    border: 1px solid rgba(245, 158, 11, 0.2);
}

body.dark-mode .lesson-subject {
    color: var(--dark-warning);
}

body.dark-mode .lesson-details {
    color: rgba(245, 158, 11, 0.8);
}

body.dark-mode .countdown-text {
    color: rgba(245, 158, 11, 0.7);
}

body.dark-mode .countdown-time {
    color: var(--dark-warning);
}

body.dark-mode .progress-info {
    color: var(--dark-text-muted);
}

body.dark-mode .quick-action-btn {
    background: var(--dark-bg-tertiary);
    border: 2px solid var(--dark-border);
    color: var(--dark-text-muted);
}

body.dark-mode .quick-action-btn:hover {
    background: var(--dark-border);
    border-color: var(--dark-accent);
    color: var(--dark-accent);
}

/* Profile Dark Mode */
body.dark-mode .modern-profile-header {
    background: linear-gradient(135deg, #4c1d95 0%, #1e1b4b 100%);
    border: 1px solid rgba(124, 58, 237, 0.3);
}

body.dark-mode .profile-avatar-modern {
    background: linear-gradient(135deg, var(--dark-bg-tertiary) 0%, var(--dark-border) 100%);
}

body.dark-mode .profile-edit-modern {
    background: rgba(124, 58, 237, 0.2);
    border: 1px solid rgba(124, 58, 237, 0.4);
}

body.dark-mode .profile-edit-modern:hover {
    background: rgba(124, 58, 237, 0.3);
}

body.dark-mode .quick-stat-card {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
    box-shadow: var(--dark-card-shadow);
}

body.dark-mode .stat-value-modern {
    color: var(--dark-text-primary);
}

body.dark-mode .stat-label-modern {
    color: var(--dark-text-muted);
}

body.dark-mode .settings-category {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
    box-shadow: var(--dark-card-shadow);
}

body.dark-mode .category-title {
    color: var(--dark-text-primary);
}

body.dark-mode .category-subtitle {
    color: var(--dark-text-muted);
}

body.dark-mode .setting-card {
    background: var(--dark-bg-tertiary);
    border: 2px solid transparent;
}

body.dark-mode .setting-card:hover {
    background: var(--dark-border);
    border-color: var(--dark-border-light);
}

body.dark-mode .setting-title {
    color: var(--dark-text-primary);
}

body.dark-mode .setting-desc {
    color: var(--dark-text-muted);
}

body.dark-mode .setting-arrow {
    color: var(--dark-text-muted);
}

body.dark-mode .setting-card:hover .setting-arrow {
    color: var(--dark-text-secondary);
}

/* Toggle Dark Mode */
body.dark-mode .toggle-label {
    background: var(--dark-border);
}

body.dark-mode .toggle-slider {
    background: var(--dark-text-primary);
}

/* Danger Zone Dark Mode */
body.dark-mode .danger-zone {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, var(--dark-bg-secondary) 100%);
    border: 2px solid rgba(239, 68, 68, 0.2);
}

body.dark-mode .danger-title {
    color: var(--dark-error);
}

body.dark-mode .danger-subtitle {
    color: rgba(239, 68, 68, 0.8);
}

body.dark-mode .danger-card {
    background: rgba(239, 68, 68, 0.05);
    border-color: rgba(239, 68, 68, 0.2);
}

body.dark-mode .danger-card:hover {
    background: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
}

/* Timetable Dark Mode */
body.dark-mode .timetable-header {
    background: linear-gradient(135deg, #7c3aed 0%, #4c1d95 100%);
}

body.dark-mode .week-navigation {
    background: var(--dark-bg-secondary);
    border-bottom: 1px solid var(--dark-border);
}

body.dark-mode .week-label {
    color: var(--dark-text-muted);
}

body.dark-mode .month-label {
    color: var(--dark-text-primary);
}

body.dark-mode .weekday {
    color: var(--dark-text-secondary);
}

body.dark-mode .weekday:not(.active):hover {
    background: var(--dark-bg-tertiary);
}

body.dark-mode .schedule-container {
    background: var(--dark-bg-primary);
}

body.dark-mode .time-column {
    background: var(--dark-bg-tertiary);
    border-right: 1px solid var(--dark-border);
}

body.dark-mode .time-slot {
    color: var(--dark-text-muted);
    border-bottom: 1px solid var(--dark-border);
}

body.dark-mode .period-slot {
    border-bottom: 1px solid var(--dark-border);
}

body.dark-mode .period-slot.pause {
    background: none;
}

body.dark-mode .period-number {
    color: var(--dark-text-muted);
}

body.dark-mode .pause-block {
    background: none;
    color: white;
    
}

/* Modal Dark Mode */
body.dark-mode .modal {
    background: rgba(0, 0, 0, 0.7);
}

body.dark-mode .modal-content {
    background: var(--dark-bg-secondary);
    border: 1px solid var(--dark-border);
}

body.dark-mode .modal-title {
    color: var(--dark-text-primary);
}

body.dark-mode .close-button {
    color: var(--dark-text-muted);
}

body.dark-mode .close-button:hover {
    color: var(--dark-text-primary);
}

/* Reflection Wizard Dark Mode */
body.dark-mode .reflection-wizard {
    background: var(--dark-bg-secondary);
}

body.dark-mode .step-title {
    color: var(--dark-text-primary);
}

body.dark-mode .step-question {
    color: var(--dark-text-muted);
}

body.dark-mode .smiley-option {
    background: var(--dark-bg-tertiary);
    border: 3px solid transparent;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

body.dark-mode .smiley-option:hover {
    background: var(--dark-border);
}

body.dark-mode .smiley-option.selected {
    background: rgba(124, 58, 237, 0.2);
    border-color: var(--dark-accent);
}

body.dark-mode .smiley-label {
    color: var(--dark-text-secondary);
}

body.dark-mode .smiley-option.selected .smiley-label {
    color: var(--dark-accent);
}

/* Table Dark Mode */
body.dark-mode .table {
    background: var(--dark-bg-secondary);
}

body.dark-mode .table th {
    background: var(--dark-bg-tertiary);
    color: var(--dark-text-primary);
    border-bottom: 1px solid var(--dark-border);
}

body.dark-mode .table td {
    border-bottom: 1px solid var(--dark-border);
    color: var(--dark-text-secondary);
}

body.dark-mode .table tr:hover {
    background: var(--dark-bg-tertiary);
}

/* Mobile Bottom Nav Dark Mode */
body.dark-mode .mobile-bottom-nav {
    background: var(--dark-bg-secondary);
    border-top: 1px solid var(--dark-border);
    box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
}

body.dark-mode .mobile-nav-item {
    color: var(--dark-text-muted);
}

body.dark-mode .mobile-nav-item:hover {
    background: var(--dark-bg-tertiary);
}

body.dark-mode .mobile-nav-item.active {
    color: var(--dark-accent);
    background: rgba(124, 58, 237, 0.1);
}

/* Scrollbars Dark Mode */
body.dark-mode ::-webkit-scrollbar {
    width: 8px;
}

body.dark-mode ::-webkit-scrollbar-track {
    background: var(--dark-bg-primary);
}

body.dark-mode ::-webkit-scrollbar-thumb {
    background: var(--dark-border);
    border-radius: 4px;
}

body.dark-mode ::-webkit-scrollbar-thumb:hover {
    background: var(--dark-border-light);
}

/* Dark Mode Toggle Button */
.dark-mode-toggle {
    position: fixed;
    bottom: 120px;
    right: 20px;
    z-index: 1000;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #7c3aed, #a855f7);
    border: none;
    color: white;
    font-size: 1.5rem;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(124, 58, 237, 0.4);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.dark-mode-toggle:hover {
    transform: scale(1.1);
    box-shadow: 0 6px 25px rgba(124, 58, 237, 0.6);
}

body.dark-mode .dark-mode-toggle {
    background: linear-gradient(135deg, #f59e0b, #f97316);
    box-shadow: 0 4px 20px rgba(245, 158, 11, 0.4);
}

body.dark-mode .dark-mode-toggle:hover {
    box-shadow: 0 6px 25px rgba(245, 158, 11, 0.6);
}

@media (max-width: 1024px) {
    .dark-mode-toggle {
        display: none;
    }
}

/* Smooth transitions for dark mode */
body, .card, .navbar, .modal-content, .stat-card, .setting-card,
.calendar-widget, .checkin-widget, .quickstats-widget, .quote-widget,
.next-lesson-widget, .mobile-bottom-nav, .timetable-header,
.week-navigation, .schedule-container {
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease;
}
    

    
    
    
html{
    overscroll-behavior: none;
}
    
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            
        }

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f8fafc;
    color: #334155;
    line-height: 1.6;
    padding-bottom: 80px; /* Platz für mobile bottom nav */
}

/* Für Mobile extra Padding oben entfernen */
@media (max-width: 1024px) {
    body {
        padding-top: 0; /* Kein Platz für Navbar nötig */
        padding-bottom: 80px;
        
    }
}
        .navbar {
            background: white;
            
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
            position: relative;
        }

        .logo {
            display: flex;
            align-items: flex-end;
            gap: 0.1rem;
            font-size: 1.2rem;
            font-weight: bold;
            color: #7c3aed;
            margin-left: -1rem;
        }

        .logo-text {
            margin-bottom: 20px;
            margin-left: -0.2rem;
            font-family: "Special Elite", system-ui;
  font-weight: 400;
  font-style: normal;
        }

        .nav-menu {
            display: flex;
            gap: 1rem;
        }

        .hamburger-menu {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 0.5rem;
        }

        .hamburger-line {
            width: 25px;
            height: 3px;
            background-color: #7c3aed;
            margin: 2px 0;
            transition: 0.3s;
            border-radius: 2px;
        }

        .mobile-nav {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border-radius: 0 0 12px 12px;
            padding: 1rem;
            z-index: 99;
        }

        .mobile-nav.active {
            display: block;
        }

        .mobile-nav .nav-button {
            display: flex;
            width: 100%;
            margin-bottom: 0.5rem;
            justify-content: flex-start;
            padding: 0.75rem 1rem;
            border-radius: 8px;
        }

        .nav-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            color: #64748b;
        }

        .nav-button.active {
            background: #ede9fe;
            color: #7c3aed;
        }

        .nav-button:hover {
            background: #f1f5f9;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .hero-card {
            background: linear-gradient(135deg, #7c3aed 0%, #3b82f6 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            transform: translate(50px, -50px);
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .hero-subtitle {
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }

        .level-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .level-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.1rem;
            font-weight: bold;
        }

        .progress-container {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 1rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255,255,255,0.3);
            border-radius: 4px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-fill {
            height: 100%;
            background: white;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .stat-icon.green { background: #dcfce7; color: #16a34a; }
        .stat-icon.blue { background: #dbeafe; color: #2563eb; }
        .stat-icon.purple { background: #ede9fe; color: #7c3aed; }
        .stat-icon.yellow { background: #fef3c7; color: #d97706; }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #1e293b;
        }

        .stat-label {
            color: #64748b;
            font-size: 0.9rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #1e293b;
        }

        /* STEP-BY-STEP REFLECTION SYSTEM */
        .reflection-wizard {
            position: relative;
            min-height: 500px;
        }

        .step-progress {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1rem;
        
        }

        .step-indicator {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            transition: all 0.3s ease;
            position: relative;
        }

        .step-indicator.completed {
            background: #16a34a;
        }

        .step-indicator.current {
            background: #7c3aed;
            box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.3);
        }

        .step-indicator.pending {
            background: #94a3b8;
        }

        .step-connector {
            width: 80px;
            height: 2px;
            background: #e2e8f0;
            position: relative;
        }

        .step-connector.completed {
            background: #16a34a;
        }

        .reflection-step {
            display: none;
            text-align: center;
            animation: fadeInUp 0.5s ease;
        }

        .reflection-step.active {
            display: block;
        }

        .step-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #1e293b;
        }

        .step-question {
            font-size: 1.2rem;
            color: #64748b;
            margin-bottom: 2rem;
        }

        .smiley-rating-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .smiley-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 1.5rem;
            border-radius: 16px;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            background: white;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            min-width: 140px;
        }

        .smiley-option:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        .smiley-option.selected {
            border-color: #7c3aed;
            background: #ede9fe;
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(124, 58, 237, 0.2);
        }

        .smiley-emoji {
            font-size: 4rem;
            margin-bottom: 0.75rem;
            transition: all 0.3s ease;
        }

        .smiley-option.selected .smiley-emoji {
            transform: scale(1.2);
        }

        .smiley-label {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            text-align: center;
        }

        .smiley-option.selected .smiley-label {
            color: #7c3aed;
        }

        .feedback-section {
            margin-top: 2rem;
            opacity: 0;
            transition: all 0.3s ease;
            transform: translateY(20px);
        }

        .feedback-section.show {
            opacity: 1;
            transform: translateY(0);
        }

        .feedback-input {
            width: 100%;
            min-height: 100px;
            padding: 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            resize: vertical;
            font-family: inherit;
            font-size: 1rem;
            transition: border-color 0.2s;
        }

        .feedback-input:focus {
            outline: none;
            border-color: #7c3aed;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
        }

        .step-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 3rem;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.8rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #64748b;
            border: 2px solid #e2e8f0;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #e2e8f0;
            color: #475580;
            padding: 1rem 1.1rem;
        }

        .btn-primary {
            background: #7c3aed;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #6d28d9;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .completion-card {
            text-align: center;
            padding: 3rem 1rem;
        }

        .completion-emoji {
            font-size: 5rem;
            margin-bottom: 1rem;
        }

        .completion-title {
            font-size: 2rem;
            font-weight: bold;
            color: #16a34a;
            margin-bottom: 1rem;
        }

        .completion-message {
            font-size: 1.2rem;
            color: #64748b;
            margin-bottom: 2rem;
        }

        .trophies-earned {
            background: #dcfce7;
            border: 2px solid #16a34a;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            font-size: 1.2rem;
            font-weight: bold;
            color: #16a34a;
        }

        .reflection-item {
            background: #f8fafc;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .reflection-title {
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .reflection-desc {
            color: #64748b;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .meldung-rating {
            background: #fef3c7;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .meldung-title {
            font-weight: bold;
            color: #92400e;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .points-summary {
            background: #dcfce7;
            border: 2px solid #16a34a;
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .points-summary .icon {
            color: #16a34a;
        }

        .table-container {
            overflow-x: auto;
            border-radius: 10px;
            border: 1px solid #e2e8f0;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .table th {
            background: #f8fafc;
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            border-bottom: 1px solid #e2e8f0;
        }

        .table td {
            padding: 1rem;
            border-bottom: 1px solid #f1f5f9;
        }

        .table tr:hover {
            background: #f8fafc;
        }

        .grade-excellent { color: #16a34a; font-weight: bold; }
        .grade-good { color: #2563eb; font-weight: bold; }
        .grade-average { color: #d97706; font-weight: bold; }
        .grade-poor { color: #dc2626; font-weight: bold; }

        .add-button {
            background: #7c3aed;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            transition: background 0.2s;
        }

        .add-button:hover {
            background: #6d28d9;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            width: 90%;
            max-width: 400px;
            position: relative;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            transition: border-color 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #7c3aed;
        }

        .modal-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .button-secondary {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .button-secondary:hover {
            background: #f8fafc;
        }

        .button-primary {
            flex: 1;
            padding: 0.75rem;
            border: none;
            background: #7c3aed;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.2s;
        }

        .button-primary:hover {
            background: #6d28d9;
        }

        .close-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #64748b;
        }

        .activity-feed {
            margin-top: 1.5rem;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .activity-item.reflection {
            background: #dcfce7;
        }

        .activity-item.grade {
            background: #dbeafe;
        }

        .activity-item.level {
            background: #ede9fe;
        }

        .activity-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #64748b;
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .notification {
            position: fixed;
            top: 80px;
            right: 1rem;
            background: #16a34a;
            color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1001;
        }

        .notification.show {
            transform: translateX(0);
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

@media (max-width: 1024px) {
    .navbar{
        display: none;
    }
    .nav-menu {
        display: none;
    }

    .hamburger-menu {
        display: none;
    }

    .mobile-nav {
        display: none;
    }

    .mobile-bottom-nav {
        display: block !important; /* !important nur hier wo nötig */
    }

    /* Alle anderen mobile styles... */
}

        .fade-in {
            animation: fadeInUp 0.5s ease-in;
        }
        
        
        
        /* Animationen */
@keyframes slideInUp {
    from { 
        opacity: 0; 
        transform: translateY(30px); 
    }
    to { 
        opacity: 1; 
        transform: translateY(0); 
    }
}

@keyframes fadeInScale {
    from { 
        opacity: 0; 
        transform: scale(0.9); 
    }
    to { 
        opacity: 1; 
        transform: scale(1); 
    }
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

@keyframes pulse-glow {
    0%, 100% { box-shadow: 0 4px 20px rgba(124, 58, 237, 0.1); }
    50% { box-shadow: 0 8px 30px rgba(124, 58, 237, 0.3); }
}

/* Widget Grid */
.widget-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

/* Mini Kalender Widget */
.calendar-widget {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    padding: 1.5rem;
    animation: slideInUp 0.6s ease-out;
}

.calendar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1rem;
    color: #1e293b;
}

.calendar-title {
    font-size: 1.2rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.calendar-nav {
    display: flex;
    gap: 0.5rem;
}

.calendar-nav-btn {
    background: #f1f5f9;
    border: none;
    border-radius: 6px;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: #64748b;
}

.calendar-nav-btn:hover {
    background: #e2e8f0;
    color: #1e293b;
}

.mini-calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 4px;
    margin-bottom: 1rem;
}

.calendar-day-header {
    text-align: center;
    font-size: 0.75rem;
    color: #64748b;
    font-weight: 600;
    padding: 0.5rem 0;
}

.calendar-day {
    aspect-ratio: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
}

.calendar-day:hover {
    background: #f1f5f9;
}

.calendar-day.today {
    background: #7c3aed;
    color: white;
    font-weight: bold;
    animation: pulse-glow 2s infinite;
}

.calendar-day.has-event::after {
    content: '';
    position: absolute;
    bottom: 2px;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 4px;
    background: #f59e0b;
    border-radius: 50%;
}

.upcoming-events {
    border-top: 1px solid #e2e8f0;
    padding-top: 1rem;
}

.upcoming-title {
    font-size: 0.9rem;
    font-weight: 600;
    color: #1e293b;
    margin-bottom: 0.75rem;
}

.event-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem;
    border-radius: 6px;
    margin-bottom: 0.5rem;
    background: #f8fafc;
    transition: all 0.2s;
}

.event-item:hover {
    background: #f1f5f9;
    transform: translateX(4px);
}

.event-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    flex-shrink: 0;
}

.event-dot.test { background: #ef4444; }
.event-dot.homework { background: #f59e0b; }
.event-dot.project { background: #3b82f6; }

.event-text {
    font-size: 0.85rem;
    color: #374151;
}

/* Check-In Widget */
.checkin-widget {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    padding: 1.5rem;
    animation: slideInUp 0.6s ease-out 0.1s both;
}

.checkin-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    color: #1e293b;
}

.checkin-title {
    font-size: 1.2rem;
    font-weight: bold;
}

.mood-selector {
    display: flex;
    justify-content: space-around;
    margin-bottom: 1.5rem;
}

.mood-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    padding: 0.75rem;
    border-radius: 10px;
    transition: all 0.3s ease;
    min-width: 30px;
}

.mood-option:hover {
    background: #f8fafc;
    transform: translateY(-2px);
}

.mood-option.selected {
    background: #ede9fe;
    transform: translateY(-2px);
}

.mood-emoji {
    font-size: 1rem;
    margin-bottom: 0.25rem;
    transition: transform 0.3s ease;
}

.mood-option.selected .mood-emoji {
    animation: float 2s ease-in-out infinite;
}

.mood-label {
    font-size: 0.75rem;
    color: #64748b;
    font-weight: 500;
}

.mood-option.selected .mood-label {
    color: #7c3aed;
    font-weight: 600;
}

.quick-note {
    width: 100%;
    padding: 0.75rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    resize: none;
    height: 60px;
    font-family: inherit;
    font-size: 0.9rem;
    transition: border-color 0.2s;
}

.quick-note:focus {
    outline: none;
    border-color: #7c3aed;
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
}

.checkin-submit {
    margin-top: 1rem;
    width: 100%;
    padding: 0.75rem;
    background: #7c3aed;
    color: white;
    border: none;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.checkin-submit:hover:not(:disabled) {
    background: #6d28d9;
    transform: translateY(-1px);
}

.checkin-submit:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Quick Stats Widget */
.quickstats-widget {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    padding: 1.5rem;
    animation: slideInUp 0.6s ease-out 0.2s both;
}

.quickstats-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    color: #1e293b;
}

.quickstats-title {
    font-size: 1.2rem;
    font-weight: bold;
}

.stats-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 0;
    border-bottom: 1px solid #f1f5f9;
}

.stats-row:last-child {
    border-bottom: none;
}

.stat-info {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.stat-icon {
    font-size: 1.1rem;
}

.stat-name {
    color: #374151;
    font-size: 0.9rem;
}

.stat-value {
    font-weight: 600;
    color: #1e293b;
}

.stat-change {
    font-size: 0.8rem;
    margin-left: 0.5rem;
}

.stat-change.positive { color: #16a34a; }
.stat-change.negative { color: #dc2626; }

/* Motivational Quote Widget */
.quote-widget {
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    padding: 1.5rem;
    text-align: center;
    position: relative;
    overflow: hidden;
    animation: slideInUp 0.6s ease-out 0.3s both;
}

.quote-widget::before {
    content: '"';
    position: absolute;
    top: -10px;
    left: 1rem;
    font-size: 4rem;
    color: #e2e8f0;
    font-family: serif;
}

.quote-text {
    font-size: 1.1rem;
    color: #374151;
    font-style: italic;
    margin-bottom: 1rem;
    line-height: 1.5;
    position: relative;
    z-index: 1;
}

.quote-author {
    color: #7c3aed;
    font-weight: 600;
    font-size: 0.9rem;
}

.quote-refresh {
    position: absolute;
    top: 5rem;
    right: 1rem;
    background: none;
    border: none;
    color: #94a3b8;
    cursor: pointer;
    font-size: 1.2rem;
    transition: all 0.3s;
    z-index: 2;
}

.quote-refresh:hover {
    color: #7c3aed;
    transform: rotate(180deg);
}

/* Responsive */
@media (max-width: 768px) {
    .widget-grid {
        grid-template-columns: 1fr;
    }
    
    .mood-selector {
        justify-content: space-between;
    }
    
    .mood-option {
        min-width: 50px;
        padding: 0.5rem;
    }
    
    .mood-emoji {
        font-size: 1.25rem;
    }
}



.next-lesson-widget {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    border: 1px solid #e2e8f0;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    position: relative;
    overflow: hidden;
    transition: all 0.3s ease;
}

.next-lesson-widget:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.12);
}

.next-lesson-widget::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #7c3aed 0%, #3b82f6 100%);
}

.next-lesson-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.next-lesson-title {
    font-size: 1.2rem;
    font-weight: bold;
    color: #1e293b;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.time-indicator {
    background: #ede9fe;
    color: #7c3aed;
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    font-family: 'Courier New', monospace;
}

.lesson-info {
    display: flex;
    justify-content: space-between;
    align-items: left;
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: #fef3c7;
    border-radius: 10px;
    border-left: 4px solid #f59e0b;
}

.lesson-main {
    flex: 1;
}

.lesson-subject {
    font-size: 1.4rem;
    font-weight: bold;
    color: #92400e;
    margin-bottom: 0.5rem;
}

.lesson-details {
    display: flex;
    gap: 1rem;
    color: #78350f;
    font-size: 0.9rem;
}

.lesson-time {
    font-weight: 600;
}

.lesson-room {
    opacity: 0.8;
}

.lesson-countdown {
    text-align: right;
    min-width: 80px;
}

.countdown-text {
    font-size: 0.75rem;
    color: #78350f;
    opacity: 0.8;
    margin-bottom: 0.25rem;
}

.countdown-time {
    font-size: 1.1rem;
    font-weight: bold;
    color: #92400e;
}

.lesson-progress {
    margin-bottom: 1.5rem;
}

.progress-info {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
    color: #64748b;
}

.lesson-progress-bar {
    width: 100%;
    height: 6px;
    background: #e2e8f0;
    border-radius: 3px;
    overflow: hidden;
}

.lesson-progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #f59e0b 0%, #f97316 100%);
    border-radius: 3px;
    transition: width 0.5s ease;
}

.quick-actions {
    display: flex;
    gap: 0.5rem;
}

.quick-action-btn {
    flex: 1;
    padding: 0.5rem 0.75rem;
    border: 2px solid #e2e8f0;
    background: white;
    border-radius: 8px;
    cursor: pointer;
    font-size: 0.8rem;
    font-weight: 600;
    color: #64748b;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
}


.quick-action-btn:hover {
    background: #f8fafc;
    border-color: #7c3aed;
    color: #7c3aed;
    transform: translateY(-1px);
}

.quick-action-btn:active {
    transform: translateY(0);
}

/* Status Varianten */
.lesson-info.current-lesson {
    background: #dcfce7;
    border-left-color: #16a34a;
}

.lesson-info.current-lesson .lesson-subject,
.lesson-info.current-lesson .lesson-details,
.lesson-info.current-lesson .countdown-time {
    color: #166534;
}

.lesson-info.current-lesson .countdown-text {
    color: #166534;
    opacity: 0.8;
}

.lesson-info.break-time {
    background: #dbeafe;
    border-left-color: #3b82f6;
}

.lesson-info.break-time .lesson-subject,
.lesson-info.break-time .lesson-details,
.lesson-info.break-time .countdown-time {
    color: #1e40af;
}

.lesson-info.break-time .countdown-text {
    color: #1e40af;
    opacity: 0.8;
}

.lesson-info.school-end {
    background: #ede9fe;
    border-left-color: #7c3aed;
}

.lesson-info.school-end .lesson-subject,
.lesson-info.school-end .lesson-details,
.lesson-info.school-end .countdown-time {
    color: #5b21b6;
}

.lesson-info.school-end .countdown-text {
    color: #5b21b6;
    opacity: 0.8;
}

@media (max-width: 768px) {
    .lesson-info {
        flex-direction: column;
        gap: 1rem;
    }
    
    .lesson-countdown {
        text-align: left;
        min-width: auto;
    }
    
    .quick-actions {
        flex-direction: column;
    }
    
    .lesson-details {
        flex-direction: column;
        gap: 0.25rem;
    }
}










/* Status-spezifische Styles für Quick Action Buttons */
.quick-action-btn.Anwesend {
    color: #16a34a !important;
    border-color: #16a34a !important;
    background: #dcfce7 !important;
    font-weight: bold;
}

.quick-action-btn.Abwesend {
    color: #dc2626 !important;
    border-color: #dc2626 !important;
    background: #fef2f2 !important;
    font-weight: bold;
}

.quick-action-btn.Late {
    color: #f59e0b !important;
    border-color: #f59e0b !important;
    background: #fef3c7 !important;
    font-weight: bold;
}

/* Anwesenheitsstatus Display */
.attendance-status-display {
    background: #f8fafc;
    border-radius: 10px;
    padding: 1rem 1rem 0 1rem;
    margin-bottom: 0.2rem;
    border: 2px solid #e2e8f0;
}

.current-status {
    font-size: 1.1rem;
    padding: 0.5rem;
    border-radius: 8px;
    text-align: center;
}

.current-status.anwesend {
    background: #dcfce7;
    border: 1px solid #16a34a;
}

.current-status.abwesend {
    background: #fef2f2;
    border: 1px solid #dc2626;
}

.current-status.verspätet {
    background: #fef3c7;
    border: 1px solid #f59e0b;
}

/* Anwesenheits-History */
.attendance-history {
    margin-top: 1.5rem;
}

.attendance-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem;
    margin-bottom: 0.5rem;
    border-radius: 8px;
    font-size: 0.9rem;
}

.attendance-item.present {
    background: #dcfce7;
    color: #16a34a;
}

.attendance-item.absent {
    background: #fef2f2;
    color: #dc2626;
}

.attendance-item.late {
    background: #fef3c7;
    color: #f59e0b;
}

/* Real-time Update Indikator */
.live-indicator {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    font-size: 0.8rem;
    color: #16a34a;
    margin-left: 0.5rem;
}

.live-dot {
    width: 8px;
    height: 8px;
    background: #16a34a;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
    100% {
        opacity: 1;
    }
}

/* Lehrer Interface Styles (falls du das auch implementieren möchtest) */
.teacher-attendance-panel {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    padding: 1.5rem;
    margin-bottom: 1.5rem;
}

.student-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    margin-bottom: 0.5rem;
}

.student-name {
    font-weight: 600;
    flex: 1;
}

.attendance-buttons {
    display: flex;
    gap: 0.5rem;
}

.attendance-btn {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    font-weight: 600;
    transition: all 0.2s;
}

.attendance-btn.present {
    background: #16a34a;
    color: white;
}

.attendance-btn.absent {
    background: #dc2626;
    color: white;
}

.attendance-btn.late {
    background: #f59e0b;
    color: white;
}

.attendance-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

/* Responsive Anpassungen */
@media (max-width: 768px) {
    .attendance-status-display {
        text-align: center;
    }
    
    .student-row {
        flex-direction: column;
        gap: 0.75rem;
        text-align: center;
    }
    
    .attendance-buttons {
        justify-content: center;
        flex-wrap: wrap;
    }
    
    .attendance-btn {
        min-width: 80px;
    }
}






/* Mobile Bottom Navigation */
.mobile-bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.1);
    display: none;
    z-index: 1000;
    border-top: 1px solid #e2e8f0;
}

.mobile-nav-container {
    display: flex;
    justify-content: center; /* Center die Buttons */
    align-items: center;
    padding: 8px 0;
    max-width: 500px;
    margin: 0 auto;
    gap: 4px; /* Gleichmäßiger Abstand */
}

.mobile-nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center; /* Vertikales Zentrieren */
    padding: 8px 12px; /* Mehr horizontales Padding */
    cursor: pointer;
    border-radius: 12px;
    transition: all 0.3s ease;
    width: 70px; /* Feste Breite für alle Buttons */
    height: 60px; /* Feste Höhe für alle Buttons */
    color: #64748b;
    border: none;
    background: none;
}

.mobile-nav-item.active {
    color: #7c3aed;
    background: #ede9fe;
}

.mobile-nav-item:hover {
    background: #f1f5f9;
}

.mobile-nav-icon {
    font-size: 1.4rem;
    margin-bottom: 2px;
    line-height: 1;
}

.mobile-nav-item.home .mobile-nav-icon {
    font-size: 1.6rem; /* Homepage icon nur minimal größer */
}

.mobile-nav-label {
    font-size: 0.65rem;
    font-weight: 600;
    text-align: center;
    line-height: 1.1;
    margin-top: 2px;
}

.mobile-nav-item.home .mobile-nav-label {
    font-size: 0.7rem;
    font-weight: bold;
}









    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <img height="72px" width="72px" src="./Picsart_25-08-11_01-41-59-810.png" alt="Logo" /> 
                <span class="logo-text">SchoolUp</span>
            </div>
            <div class="nav-menu">
                </button>
                <button class="nav-button" data-view="reflection">
                    ⭐ <span>Reflexion</span>
                </button>
                <button class="nav-button" data-view="grades">
                    📚 <span>Noten</span>
                </button>
                <button class="nav-button" data-view="leaderboard">
                    🏆 <span>Liga</span>
                </button>
                                <button class="nav-button" data-view="Stundenplan">
                    🗓 <span>Stundenplan</span>
                </button>
                
                                                                       <button class="nav-button" data-view="Lernecke">
                                                    🧠 <span>Lernecke</span>
                                                </button>                         <button class="nav-button" data-view="Minipsiele">
                                </button>
                
            </div>
            <div class="hamburger-menu" id="hamburger-menu">
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
            </div>
            <div class="mobile-nav" id="mobile-nav">
                <button class="nav-button active" data-view="dashboard">
                    📊 <span>Dashboard</span>
                </button>
                <button class="nav-button" data-view="reflection">
                    ⭐ <span>Reflexion</span>
                </button>
                <button class="nav-button" data-view="grades">
                    📚 <span>Noten</span>
                </button>
                <button class="nav-button" data-view="leaderboard">
                    🏆 <span>Liga</span>
                </button>
                                <button class="nav-button" data-view="Stundenplan">
                    🗓 <span>Stundenplan</span>
                </button>
                
                                                <button class="nav-button" data-view="Lernecke">
                                    🧠 <span>Lernecke</span>
                                </button>
                                <button class="nav-button" data-view="Minispiele">
                  👾 <span>Minispiele</span>
                                                </button>

            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Dashboard View -->
        <div id="dashboard" class="view active">
            <!-- Hero Card -->
            <div class="card hero-card">
                <div class="hero-content">
                    <h1 class="hero-title">Hallo Max Mustermann! 👋</h1>
                    <p class="hero-subtitle">Du bist auf einem großartigen Weg in der Gold-Liga!</p>
                    
                    <div class="level-info">
                        <div class="level-badge">
                            <span id="user-level-emoji">🥇</span>
                            <span id="user-level-name">Gold-Liga</span>
                        </div>
                        <div id="user-points">2,850 Trophäen</div>
                    </div>
                    
                    <div class="progress-container">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span>Liga Fortschritt</span>
                            <span id="progress-text">57%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="progress-fill" class="progress-fill" style="width: 57%"></div>
                        </div>
                        <p id="points-to-next" style="font-size: 0.9rem; opacity: 0.9; margin-top: 0.5rem;">
                            Noch 2,150 Trophäen bis zur Diamant-Liga!
                        </p>
                    </div>
                </div>
            </div>
            

  <!-- Nächste Stunde Widget - Zum Einfügen ins Dashboard -->
  <div class="next-lesson-widget">
      <div class="next-lesson-header">
          <div class="next-lesson-title">
              📚 <span>Nächste Stunde</span>
          </div>
          <div class="time-indicator" id="current-time">14:23</div>
      </div>
      
      <div class="lesson-info" id="next-lesson-info">
          <div class="lesson-main">
              <div class="lesson-subject" id="lesson-subject">Mathematik</div>
              <div class="lesson-details">
                  <span class="lesson-time" id="lesson-time">13:25 - 14:10</span>
                  <span class="lesson-room" id="lesson-room">Raum 201</span>
              </div>
          </div>
          <div class="lesson-countdown" id="lesson-countdown">
              <div class="countdown-text">Beginnt in</div>
              <div class="countdown-time">1h 2min</div>
          </div>
      </div>
      
      <div class="lesson-progress">
          <div class="progress-info">
              <span>Bis zum Stundenende</span>
              <span id="lesson-progress-text">65% verbleibend</span>
          </div>
          <div class="lesson-progress-bar">
              <div class="lesson-progress-fill" id="lesson-progress-fill" style="width: 35%"></div>
          </div>
      </div>
      
      <div class="quick-actions">
          <button class="quick-action-btn">
          </button>
          <button class="quick-action-btn" onclick="openLessonNotes()">
              📝 Notizen
          </button>
          <button class="quick-action-btn" onclick="ratePreviousLesson()">
              ⭐ Bewerten
          </button>
      </div>
  </div>            
            
            
            

            <!-- Stats Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon green">📈</div>
                    <div>
                        <div class="stat-value" id="average-grade">2.0</div>
                        <div class="stat-label">Notenschnitt</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon blue">🏆</div>
                    <div>
                        <div class="stat-value">#247</div>
                        <div class="stat-label">Liga Rang (DE)</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon purple">🏅</div>
                    <div>
                        <div class="stat-value">12</div>
                        <div class="stat-label">Badges</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon yellow">⚡</div>
                    <div>
                        <div class="stat-value">2,850</div>
                        <div class="stat-label">Trophäen</div>
                    </div>
                </div>
            </div>





<div class="stats-grid">
    
    <div class="card">
        <h3 class="section-title">📋 Heute anstehend</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
            <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 1rem; border-radius: 8px;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <span style="font-size: 1.2rem;">📚</span>
                    <strong style="color: #92400e;">Nächste Stunde:</strong>
                </div>
                <div style="color: #92400e;">Mathematik in Raum 201 (13:25)</div>
            </div>
            
            <div style="background: #dbeafe; border-left: 4px solid #3b82f6; padding: 1rem; border-radius: 8px;">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                    <span style="font-size: 1.2rem;">📝</span>
                    <strong style="color: #1e40af;">Hausaufgaben:</strong>
                </div>
                <div style="color: #1e40af;">Deutsch S. 45-47 lesen</div>
            </div>
            
            <div style="background: #dcfce7; border-left: 4px solid #16a34a; padding: 1rem; border-radius: 8px;">
                <div style="display: flex; align-items: center; gap: 0.1rem; margin-bottom: 0.5rem;">
                    <span style="font-size: 1.2rem;">📊</span>
                    <strong style="color: #166534;">Test morgen:</strong>
                </div>
                <div style="color: #166534;">Englisch Vokabeltest</div>
            </div>
        </div>
    </div>


            <!-- Recent Activity -->
            <div class="card">
                <h2 class="section-title">Letzte Aktivitäten</h2>
                <div class="activity-feed" id="activity-feed">
                    <div class="activity-item reflection">
                        <div class="activity-icon">⭐</div>
                        <span>Tägliche Reflexion abgeschlossen (+25 Trophäen)</span>
                    </div>
                    <div class="activity-item grade">
                        <div class="activity-icon">📚</div>
                        <span>Note in Geschichte hinzugefügt (+40 Trophäen)</span>
                    </div>
                    <div class="activity-item level">
                        <div class="activity-icon">🏆</div>
                        <span>Gold-Liga erreicht! (+100 Bonus Trophäen)</span>
                    </div>
                </div>
            </div>
</div>
<!-- Widget Grid mit neuen Features -->
<div class="widget-grid">
    
    <!-- Mini Kalender -->
    <div class="calendar-widget">
        <div class="calendar-header">
            <div class="calendar-title">
                📅 <span id="calendar-month-year">November 2024</span>
            </div>
            <div class="calendar-nav">
                <button class="calendar-nav-btn" onclick="changeMonth(-1)">‹</button>
                <button class="calendar-nav-btn" onclick="changeMonth(1)">›</button>
            </div>
        </div>
        
        <div class="mini-calendar" id="mini-calendar">
            <!-- Calendar wird per JavaScript generiert -->
        </div>
        
        <div class="upcoming-events">
            <div class="upcoming-title">📋 Anstehend</div>
            <div class="event-item">
                <div class="event-dot test"></div>
                <div class="event-text">Mathe Klassenarbeit - Morgen</div>
            </div>
            <div class="event-item">
                <div class="event-dot homework"></div>
                <div class="event-text">Deutsch Hausaufgaben - Heute</div>
            </div>
            <div class="event-item">
                <div class="event-dot project"></div>
                <div class="event-text">Geschichte Referat - Fr. 15.11</div>
            </div>
        </div>
    </div>
    
    <!-- Wie geht's dir Check-In -->
    <div class="checkin-widget">
        <div class="checkin-header">
            <div class="checkin-title">😊 Wie geht's dir heute?</div>
        </div>
        
        <div class="mood-selector">
            <div class="mood-option" data-mood="schlecht" onclick="selectMood(this, 'schlecht')">
                <div class="mood-emoji">😞</div>
                <div class="mood-label">Schlecht</div>
            </div>
            <div class="mood-option" data-mood="okay" onclick="selectMood(this, 'okay')">
                <div class="mood-emoji">😐</div>
                <div class="mood-label">Okay</div>
            </div>
            <div class="mood-option" data-mood="gut" onclick="selectMood(this, 'gut')">
                <div class="mood-emoji">😊</div>
                <div class="mood-label">Gut</div>
            </div>
            <div class="mood-option" data-mood="super" onclick="selectMood(this, 'super')">
                <div class="mood-emoji">😄</div>
                <div class="mood-label">Super</div>
            </div>
            <div class="mood-option" data-mood="amazing" onclick="selectMood(this, 'amazing')">
                <div class="mood-emoji">🤩</div>
                <div class="mood-label">Fantastisch</div>
            </div>
        </div>
        
        <textarea 
            class="quick-note" 
            placeholder="Was beschäftigt dich heute? (optional)"
            id="mood-note"
        ></textarea>
        
        <button class="checkin-submit" onclick="submitMoodCheckin()" disabled>
            Check-in speichern
        </button>
    </div>
    
    <!-- Quick Stats -->
    <div class="quickstats-widget">
        <div class="quickstats-header">
            <div class="quickstats-title">⚡ Woche im Überblick</div>
        </div>
        
        <div class="stats-row">
            <div class="stat-info">
                <span class="stat-icon">🎯</span>
                <span class="stat-name">Reflexionen</span>
            </div>
            <div>
                <span class="stat-value">5/7</span>
                <span class="stat-change positive">+2</span>
            </div>
        </div>
        
        <div class="stats-row">
            <div class="stat-info">
                <span class="stat-icon">📚</span>
                <span class="stat-name">Neue Noten</span>
            </div>
            <div>
                <span class="stat-value">3</span>
                <span class="stat-change positive">+1</span>
            </div>
        </div>
        
        <div class="stats-row">
            <div class="stat-info">
                <span class="stat-icon">🏆</span>
                <span class="stat-name">Trophäen</span>
            </div>
            <div>
                <span class="stat-value">+340</span>
                <span class="stat-change positive">+85</span>
            </div>
        </div>
        
        <div class="stats-row">
            <div class="stat-info">
                <span class="stat-icon">📈</span>
                <span class="stat-name">Durchschnitt</span>
            </div>
            <div>
                <span class="stat-value">2.0</span>
                <span class="stat-change positive">+0.1</span>
            </div>
        </div>
    </div>
    
    <!-- Motivational Quote -->
    <div class="quote-widget">
        <button class="quote-refresh" onclick="loadNewQuote()" title="Neuen Spruch laden">🔄</button>
        <div class="quote-text" id="motivation-quote">
            Jeder Tag ist eine neue Chance, besser zu werden als gestern.
        </div>
        <div class="quote-author" id="motivation-author">— Unbekannt</div>
    </div>
    
</div>
        </div>
        
        
        
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
        
        
        
        
        
        
  
<!-- HTML für Profile View -->
<div id="profile" class="view">
    <!-- Modern Profile Header -->
    <div class="modern-profile-header">
        <div class="profile-background-pattern"></div>
        <div class="profile-header-content">
            <div class="profile-avatar-section">
                <div class="profile-avatar-modern">
                    <span class="avatar-placeholder">👤</span>
                    <div class="avatar-ring"></div>
                    <button class="avatar-camera-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                            <circle cx="12" cy="13" r="4"></circle>
                        </svg>
                    </button>
                </div>
                <div class="profile-status-indicator"></div>
            </div>
            <div class="profile-info-modern">
                <div class="profile-name-section">
                    <h1 class="profile-name-modern">Max Mustermann</h1>
                    <button class="profile-verified">✓</button>
                </div>
                <div class="profile-subtitle">
                    <span class="profile-class-modern">🎓 Klasse 10b</span>
                    <span class="profile-separator">•</span>
                    <span class="profile-school">Gymnasium Musterstadt</span>
                </div>
                <div class="profile-email-modern">max.mustermann@schule.de</div>
                <div class="profile-badges">
                    <span class="profile-badge gold">🥇 Gold Liga</span>
                    <span class="profile-badge streak">🔥 7 Tage Streak</span>
                </div>
            </div>
            <button class="profile-edit-modern">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="m18.5 2.5 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                Bearbeiten
            </button>
        </div>
    </div>

    <!-- Quick Stats Cards -->
    <div class="profile-quick-stats">
        
        
        
  
  
        
        
        
        
        <div class="quick-stat-card">
            <div class="stat-icon-modern purple">🏆</div>
            
            
  
  
  
            
            
            
            <div class="stat-content">
                <div class="stat-value-modern">2,850</div>
                <div class="stat-label-modern">Trophäen</div>
            </div>
        </div>
        <div class="quick-stat-card">
            <div class="stat-icon-modern blue">📊</div>
            <div class="stat-content">
                <div class="stat-value-modern">2.0</div>
                <div class="stat-label-modern">Durchschnitt</div>
            </div>
        </div>
        <div class="quick-stat-card">
            <div class="stat-icon-modern green">🎯</div>
            <div class="stat-content">
                <div class="stat-value-modern">#247</div>
                <div class="stat-label-modern">Liga Rang</div>
            </div>
        </div>
    </div>

    <!-- Modern Settings -->
    <div class="modern-settings-container">
        <!-- Account Section -->
        <div class="settings-category">
            <div class="category-header">
                <h3 class="category-title">Account & Profil</h3>
                <p class="category-subtitle">Persönliche Informationen verwalten</p>
            </div>
            <div class="settings-grid">
                <div class="setting-card" onclick="openAccountSettings()">
                    <div class="setting-icon-wrapper purple">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Persönliche Daten</div>
                        <div class="setting-desc">Name, E-Mail, Schule bearbeiten</div>
                    </div>
                    <div class="setting-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </div>
                </div>

                <div class="setting-card" onclick="openNotificationSettings()">
                    <div class="setting-icon-wrapper orange">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Benachrichtigungen</div>
                        <div class="setting-desc">Push-Nachrichten konfigurieren</div>
                    </div>
                    <div class="setting-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </div>
                </div>

                <div class="setting-card" onclick="openPrivacySettings()">
                    <div class="setting-icon-wrapper green">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <circle cx="12" cy="16" r="1"></circle>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Privatsphäre & Sicherheit</div>
                        <div class="setting-desc">Datenschutz-Einstellungen</div>
                    </div>
                    <div class="setting-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- App Preferences -->
        <div class="settings-category">
            <div class="category-header">
                <h3 class="category-title">App-Einstellungen</h3>
                <p class="category-subtitle">Personalisiere deine Erfahrung</p>
            </div>
            <div class="settings-grid" >
                <div class="setting-card">
                    <div class="setting-icon-wrapper blue">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="5"></circle>
                            <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"></path>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Design-Modus</div>
                        <div class="setting-desc">Hell oder dunkel</div>
                    </div>
                    <div class="modern-toggle">
                        <input type="checkbox" id="theme-toggle" class="toggle-input">
                        <label for="theme-toggle" class="toggle-label">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="setting-card">
                    <div class="setting-icon-wrapper purple">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Profil teilen</div>
                        <div class="setting-desc">In Liga sichtbar sein</div>
                    </div>
                    <div class="modern-toggle">
                        <input type="checkbox" id="share-toggle" class="toggle-input" checked>
                        <label for="share-toggle" class="toggle-label">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <div class="setting-card">
                    <div class="setting-icon-wrapper green">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3v18h18"></path>
                            <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"></path>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Erweiterte Statistiken</div>
                        <div class="setting-desc">Detaillierte Analytics</div>
                    </div>
                    <div class="modern-toggle">
                        <input type="checkbox" id="stats-toggle" class="toggle-input" checked>
                        <label for="stats-toggle" class="toggle-label">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Support & Info -->
        <div class="settings-category">
            <div class="category-header">
                <h3 class="category-title">Support & Informationen</h3>
                <p class="category-subtitle">Hilfe und rechtliche Hinweise</p>
            </div>
            <div class="settings-grid">
                <div class="setting-card" onclick="openHelp()">
                    <div class="setting-icon-wrapper blue">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                            <path d="M12 17h.01"></path>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Hilfe & Support</div>
                        <div class="setting-desc">FAQs und Kontakt</div>
                    </div>
                    <div class="setting-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </div>
                </div>

                <div class="setting-card" onclick="showPrivacyPolicy()">
                    <div class="setting-icon-wrapper green">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14,2 14,8 20,8"></polyline>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Datenschutz</div>
                        <div class="setting-desc">Datenschutzerklärung ansehen</div>
                    </div>
                    <div class="setting-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </div>
                </div>

                <div class="setting-card" onclick="showAbout()">
                    <div class="setting-icon-wrapper purple">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 6v6l4 2"></path>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Über SchoolUp</div>
                        <div class="setting-desc">Version 2.1.0 • Was ist neu?</div>
                    </div>
                    <div class="setting-arrow">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Danger Zone -->
        <div class="settings-category danger-zone">
            <div class="category-header">
                <h3 class="category-title danger-title">Account-Aktionen</h3>
                <p class="category-subtitle danger-subtitle">Vorsicht bei diesen Aktionen</p>
            </div>
            <div class="settings-grid">
                <div class="setting-card danger-card" onclick="showLogoutConfirm()">
                    <div class="setting-icon-wrapper danger">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16,17 21,12 16,7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Abmelden</div>
                        <div class="setting-desc">Aus dem Account ausloggen</div>
                    </div>
                    <div class="setting-arrow danger">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </div>
                </div>

                <div class="setting-card danger-card" onclick="showDeleteConfirm()">
                    <div class="setting-icon-wrapper danger">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3,6 5,6 21,6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </div>
                    <div class="setting-content">
                        <div class="setting-title">Account löschen</div>
                        <div class="setting-desc">Alle Daten permanent entfernen</div>
                    </div>
                    <div class="setting-arrow danger">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M9 18l6-6-6-6"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Modern Profile Header */
.modern-profile-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    position: relative;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
}

.profile-background-pattern {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 80%, rgba(255,255,255,0.1) 0%, transparent 50%);
}

.profile-header-content {
    position: relative;
    z-index: 2;
    display: flex;
    align-items: center;
    gap: 2rem;
}

.profile-avatar-section {
    position: relative;
}

.profile-avatar-modern {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: linear-gradient(135deg, grey 0%, ghostwhite 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 3.5rem;
    position: relative;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.avatar-placeholder {
    color: white;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.avatar-ring {
    position: absolute;
    top: -8px;
    left: -8px;
    right: -8px;
    bottom: -8px;
    border-radius: 50%;
    border: 3px solid rgba(255,255,255,0.3);
    background: linear-gradient(45deg, rgba(255,255,255,0.6), rgba(255,255,255,0.2));
    animation: rotate 10s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

.avatar-camera-btn {
    position: absolute;
    bottom: 5px;
    right: 5px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #7c3aed;
    border: 3px solid white;
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
}

.avatar-camera-btn:hover {
    transform: scale(1.1);
    background: #6d28d9;
}

.profile-status-indicator {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #10b981;
    border: 3px solid white;
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.3);
    animation: pulse 2s infinite;
}

.profile-info-modern {
    flex: 1;
    color: white;
}

.profile-name-section {
    display: flex;
    align-items: center;
    gap: 0.2rem;
    margin-bottom: 0.5rem;
}

.profile-name-modern {
    font-size: 2.5rem;
    font-weight: 800;
    margin: 0;
    text-shadow: 0 2px 4px rgba(0,0,0,0.3);
}

.profile-verified {
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: #10b981;
    color: white;
    border: none;
    font-size: 0.8rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

.profile-subtitle {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
    font-size: 1.1rem;
    opacity: 0.9;
}

.profile-separator {
    opacity: 0.6;
}

.profile-email-modern {
    opacity: 0.8;
    margin-bottom: 1rem;
    font-size: 0.95rem;
}

.profile-badges {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.profile-badge {
    padding: 0.4rem 0.8rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.2);
}

.profile-badge.gold {
    background: rgba(251, 191, 36, 0.2);
    color: #fbbf24;
}

.profile-badge.streak {
    background: rgba(239, 68, 68, 0.2);
    color: #ef4444;
}

.profile-edit-modern {
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.3);
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 12px;
    cursor: pointer;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.3s ease;
    white-space: nowrap;
}

.profile-edit-modern:hover {
    background: rgba(255,255,255,0.3);
    transform: translateY(-2px);
}

/* Quick Stats */
.profile-quick-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.quick-stat-card {
    background: white;
    padding: 1.5rem;
    border-radius: 16px;
    display: flex;
    align-items: center;
    gap: 1rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
    border: 1px solid rgba(0,0,0,0.05);
}

.quick-stat-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.12);
}

.stat-icon-modern {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
}

.stat-icon-modern.purple { background: linear-gradient(135deg, #a855f7, #7c3aed); color: white; }
.stat-icon-modern.blue { background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; }
.stat-icon-modern.green { background: linear-gradient(135deg, #10b981, #059669); color: white; }
.stat-icon-modern.orange { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; }

.stat-value-modern {
    font-size: 1.8rem;
    font-weight: 800;
    color: #1e293b;
    line-height: 1;
}

.stat-label-modern {
    color: #64748b;
    font-size: 0.9rem;
    font-weight: 500;
}

/* Modern Settings */
.modern-settings-container {
    display: flex;
    flex-direction: column;
    gap: 2rem;
}

.settings-category {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    border: 1px solid rgba(0,0,0,0.05);
}

.category-header {
    margin-bottom: 2rem;
}

.category-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e293b;
    margin: 0 0 0.5rem 0;
}

.category-subtitle {
    color: #64748b;
    margin: 0;
    font-size: 0.95rem;
}

.settings-grid {
    display: grid;
    gap: 1rem;
}

.setting-card {
    background: #f8fafc;
    border: 2px solid transparent;
    border-radius: 16px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
}

.setting-card:hover {
    background: #f1f5f9;
    border-color: #e2e8f0;
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.setting-icon-wrapper {
    width: 48px;
    height: 48px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    flex-shrink: 0;
}

.setting-icon-wrapper.purple { background: linear-gradient(135deg, #a855f7, #7c3aed); }
.setting-icon-wrapper.blue { background: linear-gradient(135deg, #3b82f6, #1d4ed8); }
.setting-icon-wrapper.green { background: linear-gradient(135deg, #10b981, #059669); }
.setting-icon-wrapper.orange { background: linear-gradient(135deg, #f59e0b, #d97706); }

.setting-content {
    flex: 1;
}

.setting-title {
    font-weight: 600;
    color: #1e293b;
    font-size: 1.05rem;
    margin-bottom: 0.25rem;
}

.setting-desc {
    color: #64748b;
    font-size: 0.9rem;
    line-height: 1.4;
}

.setting-arrow {
    color: #94a3b8;
    transition: all 0.2s ease;
}

.setting-card:hover .setting-arrow {
    color: #64748b;
    transform: translateX(4px);
}

/* Modern Toggle */
.modern-toggle {
    position: relative;
}

.toggle-input {
    display: none;
}

.toggle-label {
    display: block;
    width: 54px;
    height: 30px;
    background: #e2e8f0;
    border-radius: 30px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
}

.toggle-slider {
    position: absolute;
    top: 3px;
    left: 3px;
    width: 24px;
    height: 24px;
    background: white;
    border-radius: 50%;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.toggle-input:checked + .toggle-label {
    background: linear-gradient(135deg, #7c3aed, #a855f7);
}

.toggle-input:checked + .toggle-label .toggle-slider {
    transform: translateX(24px);
}

/* Danger Zone */
.danger-zone {
    border: 2px solid #fecaca;
    background: linear-gradient(135deg, #fef2f2, #fff);
}

.danger-title {
    color: #dc2626;
}

.danger-subtitle {
    color: #b91c1c;
}

.danger-card {
    background: #fef2f2;
    border-color: #fecaca;
}

.danger-card:hover {
    background: #fee2e2;
    border-color: #fca5a5;
}

.setting-icon-wrapper.danger {
    background: linear-gradient(135deg, #ef4444, #dc2626);
}

.setting-arrow.danger {
    color: #dc2626;
}

/* Responsive Design */
@media (max-width: 768px) {
    .profile-header-content {
        flex-direction: column;
        text-align: center;
        gap: 1.5rem;
    }
    
    .profile-name-modern {
        font-size: 2rem;
    }
    
    .profile-subtitle {
        justify-content: center;
    }
    
    .profile-badges {
        justify-content: center;
    }
    
    .profile-quick-stats {
        grid-template-columns: 1fr;
    }
    
    .settings-grid {
        gap: 0.75rem;
    }
    
    .setting-card {
        padding: 1.25rem;
    }
    
    .modern-settings-container {
        gap: 1.5rem;
    }
    
    .settings-category {
        padding: 1.5rem;
    }
}

@media (max-width: 480px) {
    .profile-avatar-modern {
        width: 100px;
        height: 100px;
        font-size: 3rem;
    }
    
    .profile-name-modern {
        font-size: 1.75rem;
    }
    
    .category-title {
        font-size: 1.3rem;
    }
    
    .quick-stat-card {
        padding: 1.25rem;
    }
    
    .stat-value-modern {
        font-size: 1.5rem;
    }
}
</style>

<!-- JavaScript Functions -->
<script>
// Profile Functions
function openAccountSettings() {
    showNotification('Account-Einstellungen werden geöffnet...', 'info');
    // Hier würde ein Modal oder neue Seite geöffnet
}

function openNotificationSettings() {
    showNotification('Benachrichtigungs-Einstellungen werden geöffnet...', 'info');
}

function openPrivacySettings() {
    showNotification('Privatsphäre-Einstellungen werden geöffnet...', 'info');
}

function openHelp() {
    showNotification('Hilfe-Bereich wird geöffnet...', 'info');
}

function showPrivacyPolicy() {
    showModal('Datenschutzerklärung', `
        <div style="max-height: 400px; overflow-y: auto; padding: 1rem;">
            <h4>Datenschutzerklärung für SchoolUp</h4>
            <p><strong>Stand: November 2024</strong></p>
            
            <h5>1. Datenerfassung</h5>
            <p>Wir erfassen nur die Daten, die für die Funktionalität der App erforderlich sind:</p>
            <ul>
                <li>Name und E-Mail-Adresse</li>
                <li>Schulinformationen (Klasse, Schule)</li>
                <li>Noten und Reflexionen (lokal gespeichert)</li>
                <li>App-Nutzungsstatistiken (anonymisiert)</li>
            </ul>
            
            <h5>2. Datenverwendung</h5>
            <p>Ihre Daten werden ausschließlich verwendet um:</p>
            <ul>
                <li>Die App-Funktionalität bereitzustellen</li>
                <li>Ihren Fortschritt zu verfolgen</li>
                <li>Die App zu verbessern</li>
            </ul>
            
            <h5>3. Datenschutz</h5>
            <p>• Alle persönlichen Daten werden verschlüsselt gespeichert<br>
            • Keine Weitergabe an Dritte ohne Ihre Zustimmung<br>
            • Sie können Ihre Daten jederzeit löschen</p>
            
            <p><strong>Bei Fragen wenden Sie sich an: privacy@schoolup.de</strong></p>
        </div>
    `);
}

function showAbout() {
    showModal('Über SchoolUp', `
        <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">🎓</div>
            <h3>SchoolUp</h3>
            <p style="color: #64748b; margin-bottom: 2rem;">Schule wird zum Spiel</p>
            
            <div style="background: #f8fafc; border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                <h4>Version 2.1.0</h4>
                <p style="color: #64748b; margin: 0.5rem 0;">Veröffentlicht am 15. November 2024</p>
                
                <h5 style="margin-top: 1.5rem;">✨ Was ist neu?</h5>
                <ul style="text-align: left; color: #64748b;">
                    <li>Verbessertes Profil-Design</li>
                    <li>Neue Statistik-Features</li>
                    <li>Performance-Optimierungen</li>
                    <li>Bug-Fixes und Stabilität</li>
                </ul>
            </div>
            
            <p style="color: #64748b; font-size: 0.9rem;">
                Entwickelt mit ❤️ für bessere Bildung<br>
                © 2024 SchoolUp Team
            </p>
        </div>
    `);
}

function showLogoutConfirm() {
    showConfirmDialog(
        'Abmelden',
        'Möchtest du dich wirklich von SchoolUp abmelden?',
        'Abmelden',
        'Abbrechen',
        function() {
            showNotification('Du wurdest erfolgreich abgemeldet', 'success');
            // Hier würde der echte Logout passieren
            setTimeout(() => {
                alert('Weiterleitung zur Login-Seite...');
            }, 1500);
        }
    );
}

function showDeleteConfirm() {
    showConfirmDialog(
        '⚠️ Account löschen',
        `<div style="color: #dc2626;">
            <strong>Diese Aktion kann nicht rückgängig gemacht werden!</strong><br><br>
            Alle deine Daten werden permanent gelöscht:
            <ul style="margin: 1rem 0; text-align: left;">
                <li>Noten und Reflexionen</li>
                <li>Trophäen und Liga-Position</li>
                <li>Badges und Erfolge</li>
                <li>Persönliche Einstellungen</li>
            </ul>
            Bist du dir absolut sicher?
        </div>`,
        'Account löschen',
        'Abbrechen',
        function() {
            // Zweite Bestätigung
            const confirmation = prompt('Gib "LÖSCHEN" ein, um zu bestätigen:');
            if (confirmation === 'LÖSCHEN') {
                showNotification('Account wird gelöscht...', 'error');
                setTimeout(() => {
                    alert('Account wurde gelöscht. Auf Wiedersehen!');
                }, 2000);
            } else {
                showNotification('Account-Löschung abgebrochen', 'info');
            }
        }
    );
};

// Utility Functions
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification show ${type}`;
    
    const icon = type === 'success' ? '✅' : type === 'error' ? '❌' : 'ℹ️';
    notification.innerHTML = `${icon} ${message}`;
    
    const colors = {
        success: '#16a34a',
        error: '#dc2626',
        info: '#3b82f6'
    };
    
    notification.style.background = colors[type];
    notification.style.color = 'white';
    notification.style.position = 'fixed';
    notification.style.top = '20px';
    notification.style.right = '20px';
    notification.style.padding = '1rem 1.5rem';
    notification.style.borderRadius = '12px';
    notification.style.boxShadow = '0 4px 20px rgba(0,0,0,0.2)';
    notification.style.zIndex = '10000';
    notification.style.fontWeight = '600';
    notification.style.transform = 'translateX(100%)';
    notification.style.transition = 'transform 0.3s ease';
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
            document.body.removeChild(notification);
        }, 300);
    }, 3000);
}

function showModal(title, content) {
    const modal = document.createElement('div');
    modal.className = 'modal active';
    modal.innerHTML = `
        <div class="modal-content" style="max-width: 600px; max-height: 80vh; overflow-y: auto;">
            <button class="close-button" onclick="this.closest('.modal').remove()">&times;</button>
            <h3 class="modal-title">${title}</h3>
            ${content}
            <div style="margin-top: 2rem; text-align: center;">
                <button class="button-primary" onclick="this.closest('.modal').remove()">Schließen</button>
            </div>
        </div>
    `;
    
    modal.style.display = 'flex';
    document.body.appendChild(modal);
    
    // Close on background click
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.remove();
        }
    });
}

function showConfirmDialog(title, message, confirmText, cancelText, onConfirm) {
    const modal = document.createElement('div');
    modal.className = 'modal active';
    modal.innerHTML = `
        <div class="modal-content" style="max-width: 500px;">
            <h3 class="modal-title">${title}</h3>
            <div style="margin: 1.5rem 0;">${message}</div>
            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                <button class="button-secondary" style="flex: 1;" onclick="this.closest('.modal').remove()">
                    ${cancelText}
                </button>
                <button class="button-primary" style="flex: 1; background: #dc2626;" onclick="
                    this.closest('.modal').remove();
                    (${onConfirm.toString()})();
                ">
                    ${confirmText}
                </button>
            </div>
        </div>
    `;
    
    modal.style.display = 'flex';
    document.body.appendChild(modal);
    
    // Close on background click (only cancel)
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.remove();
        }
    });
}

// Toggle Functions
document.addEventListener('DOMContentLoaded', function() {
    // Theme Toggle
    const themeToggle = document.getElementById('theme-toggle');
    if (themeToggle) {
        themeToggle.addEventListener('change', function() {
            if (this.checked) {
                document.body.classList.add('dark-mode');
                showNotification('Dunkler Modus aktiviert', 'info');
            } else {
                document.body.classList.remove('dark-mode');
                showNotification('Heller Modus aktiviert', 'info');
            }
        });
    }
    
    // Other toggles
    document.querySelectorAll('.toggle-input').forEach(toggle => {
        toggle.addEventListener('change', function() {
            const settingName = this.closest('.setting-card').querySelector('.setting-title').textContent;
            const status = this.checked ? 'aktiviert' : 'deaktiviert';
            showNotification(`${settingName} ${status}`, 'info');
        });
    });
});
</script>
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

        
        
<div id="timetable" class="view">
    <!-- Header -->
    <div class="timetable-header">
        <div class="header-content">
            <h1 class="header-title">Individueller Stundenplan</h1>
            <p class="header-subtitle">Immer und überall<br>up to date</p>
        </div>
        <div class="header-controls">
            <button class="week-selector" onclick="showWeekPicker()">
                <span>Auswählen</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M6 9l6 6 6-6"/>
                </svg>
            </button>
            <button class="settings-btn" onclick="openSettings()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 1l3 6 6 3-6 3-3 6-3-6-6-3 6-3z"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Week Navigation -->
    <div class="week-navigation">
        <div class="calendar-week">
            <span class="week-label">KW 14</span>
            <span class="month-label">Mär</span>
        </div>
        <div class="weekdays">
            <div class="weekday">
                <span class="day-letter">M</span>
                <span class="day-number">31</span>
            </div>
            <div class="weekday">
                <span class="day-letter">D</span>
                <span class="day-number">1</span>
            </div>
            <div class="weekday active">
                <span class="day-letter">M</span>
                <span class="day-number">2</span>
            </div>
            <div class="weekday">
                <span class="day-letter">D</span>
                <span class="day-number">3</span>
            </div>
            <div class="weekday">
                <span class="day-letter">F</span>
                <span class="day-number">4</span>
            </div>
        </div>
    </div>

    <!-- Timetable Schedule -->
    <div class="schedule-container">
        <div class="schedule-grid">
            <!-- Time slots -->
            <div class="time-column">
                <div class="time-slot">08:00</div>
                <div class="time-slot">08:45</div>
                <div class="time-slot">08:55</div>
                <div class="time-slot">09:40</div>
                <div class="time-slot">09:50</div>
                <div class="time-slot">10:35</div>
                <div class="time-slot">10:45</div>
                <div class="time-slot">11:30</div>
                <div class="time-slot">11:40</div>
                <div class="time-slot">12:25</div>
                <div class="time-slot">12:35</div>
                <div class="time-slot">13:20</div>
                <div class="time-slot">13:30</div>
                <div class="time-slot">14:15</div>
                <div class="time-slot">14:25</div>
                <div class="time-slot">15:10</div>
                <div class="time-slot">15:20</div>
                <div class="time-slot">16:05</div>
                <div class="time-slot">16:15</div>
                <div class="time-slot">17:00</div>
            </div>

            <!-- Schedule content -->
            <div class="schedule-content">
                <!-- Period 1 -->
                <div class="period-slot">
                    <span class="period-number">1.</span>
                    <div class="subject-block gray">
                        <span class="subject-name">SPR</span>
                    </div>
                </div>

                <!-- Period 2 -->
                <div class="period-slot">
                    <span class="period-number">2.</span>
                    <div class="subject-blocks">
                        <div class="subject-block red">
                            <span class="subject-code">2B</span>
                            <span class="subject-room">2.05</span>
                            <span class="subject-name">Eng</span>
                        </div>
                        <div class="subject-block red">
                            <span class="subject-code">2B</span>
                            <span class="subject-room">2.05</span>
                            <span class="subject-name">Eng</span>
                        </div>
                        <div class="subject-block red">
                            <span class="subject-code">2B</span>
                            <span class="subject-room">2.05</span>
                            <span class="subject-name">Eng</span>
                        </div>
                    </div>
                </div>

                <!-- Period 3 -->
                <div class="period-slot">
                    <span class="period-number">3.</span>
                    <div class="subject-blocks">
                        <div class="subject-block green">
                            <span class="subject-code">3A</span>
                            <span class="subject-room">1.01</span>
                            <span class="subject-name">Geo</span>
                        </div>
                        <div class="subject-block brown">
                            <span class="subject-code">1A</span>
                            <span class="subject-room">1.03</span>
                            <span class="subject-name">His</span>
                            <span class="teacher">Bauer</span>
                        </div>
                        <div class="subject-block green">
                            <span class="subject-code">3A</span>
                            <span class="subject-room">1.01</span>
                            <span class="subject-name">Geo</span>
                        </div>
                        <div class="subject-block green">
                            <span class="subject-code">3A</span>
                            <span class="subject-room">1.01</span>
                            <span class="subject-name">Geo</span>
                        </div>
                        <div class="subject-block green">
                            <span class="subject-code">3A</span>
                            <span class="subject-room">1.01</span>
                            <span class="subject-name">Geo</span>
                            <div class="subject-icons">
                                <span class="icon">📧</span>
                                <span class="icon">🔔</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Period 4 -->
                <div class="period-slot">
                    <span class="period-number">4.</span>
                    <div class="subject-blocks">
                        <div class="subject-block blue">
                            <span class="subject-code">1A, 1B</span>
                            <span class="subject-room">1.03</span>
                            <span class="subject-name">Math</span>
                            <span class="teacher">Haas</span>
                        </div>
                        <div class="subject-block black">
                            <span class="subject-code">2B</span>
                            <span class="subject-room">2.05</span>
                            <span class="subject-name">Inf</span>
                        </div>
                    </div>
                </div>

                <!-- Period 5 -->
                <div class="period-slot">
                    <span class="period-number">5.</span>
                    <div class="subject-blocks">
                        <div class="subject-block green">
                            <span class="subject-code">2B</span>
                            <span class="subject-room">4.02</span>
                            <span class="subject-name">Geo</span>
                        </div>
                    </div>
                </div>

                <!-- Pause -->
                <div class="period-slot pause">
                    <span class="period-number">6.</span>
                    <div class="pause-block">
                        <span class="pause-text">Pause</span>
                    </div>
                </div>

                <!-- Period 7 -->
                <div class="period-slot">
                    <span class="period-number">7.</span>
                    <div class="subject-blocks">
                        <div class="subject-block green">
                            <span class="subject-code">3A</span>
                            <span class="subject-room">2.02</span>
                            <span class="subject-name">Inf</span>
                        </div>
                        <div class="subject-block black">
                            <span class="subject-code">2B</span>
                            <span class="subject-room">2.05</span>
                            <span class="subject-name">Inf</span>
                        </div>
                        <div class="subject-block red">
                            <span class="subject-code">2B</span>
                            <span class="subject-room">2.05</span>
                            <span class="subject-name">Eng</span>
                        </div>
                        <div class="subject-block yellow">
                            <span class="subject-code">1B</span>
                            <span class="subject-name">Works</span>
                            <span class="subject-room">Wk</span>
                        </div>
                        <div class="subject-block black">
                            <span class="subject-code">4C</span>
                            <span class="subject-room">3.03</span>
                            <span class="subject-name">Inf</span>
                        </div>
                    </div>
                </div>

                <!-- Period 8 -->
                <div class="period-slot">
                    <span class="period-number">8.</span>
                </div>

                <!-- Period 9 -->
                <div class="period-slot">
                    <span class="period-number">9.</span>
                    <div class="subject-blocks">
                        <div class="subject-block red">
                            <span class="subject-code">2A, 2B, 3A</span>
                            <span class="subject-room">1.01, 4.02</span>
                            <span class="subject-name">Rem...</span>
                        </div>
                    </div>
                </div>

                <!-- Period 10 -->
                <div class="period-slot">
                    <span class="period-number">10.</span>
                    <div class="subject-blocks">
                        <div class="subject-block black">
                            <span class="subject-code">3A</span>
                            <span class="subject-room">1.01</span>
                            <span class="subject-name">Inf</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* Timetable Styles */
.timetable-header {
    background: linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%);
    color: white;
    padding: 2rem 1.5rem 1.5rem;
    position: relative;
    overflow: hidden;
}

.timetable-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="1" fill="rgba(255,255,255,0.1)"/><circle cx="80" cy="80" r="0.5" fill="rgba(255,255,255,0.05)"/><circle cx="40" cy="60" r="0.8" fill="rgba(255,255,255,0.08)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
    opacity: 0.3;
}

.header-content {
    position: relative;
    z-index: 2;
    margin-bottom: 1rem;
}

.header-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    text-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.header-subtitle {
    font-size: 0.9rem;
    opacity: 0.9;
    line-height: 1.4;
}

.header-controls {
    position: absolute;
    top: 1.5rem;
    right: 1.5rem;
    display: flex;
    gap: 0.5rem;
    z-index: 3;
}

.week-selector, .settings-btn {
    background: rgba(255,255,255,0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255,255,255,0.3);
    color: white;
    border-radius: 12px;
    padding: 0.5rem 1rem;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    transition: all 0.2s ease;
}

.settings-btn {
    padding: 0.5rem;
    width: auto;
}

.week-selector:hover, .settings-btn:hover {
    background: rgba(255,255,255,0.3);
    transform: translateY(-1px);
}

/* Week Navigation */
.week-navigation {
    background: #f8fafc;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.calendar-week {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 60px;
}

.week-label {
    font-size: 0.75rem;
    color: #64748b;
    font-weight: 500;
}

.month-label {
    font-size: 1rem;
    font-weight: 600;
    color: #1e293b;
}

.weekdays {
    display: flex;
    gap: 0.5rem;
    flex: 1;
    justify-content: space-around;
}

.weekday {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 0.5rem;
    border-radius: 8px;
    min-width: 40px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.weekday.active {
    background: #3b82f6;
    color: white;
}

.weekday:not(.active):hover {
    background: #e2e8f0;
}

.day-letter {
    font-size: 0.75rem;
    font-weight: 500;
    margin-bottom: 0.25rem;
    opacity: 0.8;
}

.day-number {
    font-size: 1.1rem;
    font-weight: 600;
}

/* Schedule */
.schedule-container {
    flex: 1;
    overflow-y: auto;
    background: #f8fafc;
}

.schedule-grid {
    display: flex;
    min-height: 100%;
}

.time-column {
    width: 60px;
    background: #f1f5f9;
    border-right: 1px solid #e2e8f0;
    flex-shrink: 0;
}

.time-slot {
    height: 45px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    color: #64748b;
    font-weight: 500;
    border-bottom: 1px solid #e2e8f0;
}

.schedule-content {
    flex: 1;
    padding: 0;
}

.period-slot {
    min-height: 90px;
    border-bottom: 1px solid #e2e8f0;
    display: flex;
    align-items: center;
    padding: 0.75rem;
    gap: 0.75rem;
    position: relative;
}

.period-slot.pause {
    background: #f8fafc;
}

.period-number {
    font-size: 0.75rem;
    color: #64748b;
    font-weight: 600;
    min-width: 16px;
    text-align: center;
}

.subject-blocks {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    flex: 1;
}

.subject-block {
    border-radius: 8px;
    padding: 0.5rem;
    min-width: 60px;
    font-size: 0.75rem;
    font-weight: 500;
    color: white;
    position: relative;
    border-left: 4px solid transparent;
    display: flex;
    flex-direction: column;
    gap: 0.1rem;
}

.subject-block.red {
    background: #ef4444;
    border-left-color: #dc2626;
}

.subject-block.green {
    background: #10b981;
    border-left-color: #059669;
}

.subject-block.blue {
    background: #3b82f6;
    border-left-color: #2563eb;
}

.subject-block.yellow {
    background: #f59e0b;
    border-left-color: #d97706;
    color: #1e293b;
}

.subject-block.black {
    background: #1e293b;
    border-left-color: #0f172a;
}

.subject-block.brown {
    background: #92400e;
    border-left-color: #78350f;
}

.subject-block.gray {
    background: #6b7280;
    border-left-color: #4b5563;
}

.subject-block.purple {
    background: #8b5cf6;
    border-left-color: #7c3aed;
}

.subject-code {
    font-weight: 600;
    font-size: 0.7rem;
}

.subject-room {
    font-size: 0.7rem;
    opacity: 0.9;
}

.subject-name {
    font-weight: 600;
    font-size: 0.75rem;
}

.teacher {
    font-size: 0.65rem;
    opacity: 0.8;
    font-style: italic;
}

.subject-icons {
    display: flex;
    gap: 0.25rem;
    margin-top: 0.25rem;
}

.icon {
    font-size: 0.6rem;
    opacity: 0.8;
}

.pause-block {
    background: none;
    color: darkgrey;
    padding: 0.75rem 1rem;
    border-radius: 12px;
    font-weight: 600;
    text-align: center;
    flex: 1;
    
}

.pause-text {
    font-size: 0.9rem;
}

/* Responsive Design */
@media (max-width: 480px) {
    .header-title {
        font-size: 1.3rem;
    }
    
    .header-subtitle {
        font-size: 0.8rem;
    }
    
    .week-navigation {
        padding: 0.75rem 1rem;
    }
    
    .weekdays {
        gap: 0.25rem;
    }
    
    .weekday {
        min-width: 35px;
        padding: 0.4rem;
    }
    
    .period-slot {
        padding: 0.5rem;
        gap: 0.5rem;
        min-height: 80px;
    }
    
    .subject-blocks {
        gap: 0.4rem;
    }
    
    .subject-block {
        padding: 0.4rem;
        min-width: 55px;
    }
}

@media (max-width: 320px) {
    .header-controls {
        position: static;
        margin-top: 1rem;
        justify-content: flex-end;
    }
    
    .week-selector span {
        display: none;
    }
    
    .weekday {
        min-width: 30px;
        padding: 0.3rem;
    }
    
    .day-letter {
        font-size: 0.7rem;
    }
    
    .day-number {
        font-size: 1rem;
    }
}
</style>

<script>
function showWeekPicker() {
    showNotification('Wochenauswahl wird geöffnet...', 'info');
    // Hier würde ein Datepicker oder Wochenauswahl Modal geöffnet
}

function openSettings() {
    showNotification('Stundenplan-Einstellungen werden geöffnet...', 'info');
    // Hier würden die Stundenplan-spezifischen Einstellungen geöffnet
}

// Weekday selection
document.querySelectorAll('.weekday').forEach(day => {
    day.addEventListener('click', function() {
        document.querySelectorAll('.weekday').forEach(d => d.classList.remove('active'));
        this.classList.add('active');
        
        const dayNumber = this.querySelector('.day-number').textContent;
        showNotification(`Tag ${dayNumber} ausgewählt`, 'info');
        
        // Hier würde der Stundenplan für den gewählten Tag geladen
    });
});

// Subject block interactions
document.querySelectorAll('.subject-block').forEach(block => {
    block.addEventListener('click', function() {
        const subject = this.querySelector('.subject-name')?.textContent || 'Fach';
        const room = this.querySelector('.subject-room')?.textContent || '';
        const teacher = this.querySelector('.teacher')?.textContent || '';
        
        let info = `${subject}`;
        if (room) info += ` • Raum ${room}`;
        if (teacher) info += ` • ${teacher}`;
        
        showNotification(info, 'info');
    });
});

// Utility function for notifications
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `notification show ${type}`;
    
    const icon = type === 'success' ? '✅' : type === 'error' ? '❌' : 'ℹ️';
    notification.innerHTML = `${icon} ${message}`;
    
    const colors = {
        success: '#16a34a',
        error: '#dc2626',
        info: '#3b82f6'
    };
    
    notification.style.cssText = `
        background: ${colors[type]};
        color: white;
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 0.75rem 1.25rem;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        z-index: 10000;
        font-weight: 600;
        font-size: 0.9rem;
        transform: translateX(100%);
        transition: transform 0.3s ease;
        max-width: 300px;
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 100);
    
    setTimeout(() => {
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => {
            if (document.body.contains(notification)) {
                document.body.removeChild(notification);
            }
        }, 300);
    }, 3000);
}
</script>
        
        
        




        <!-- Reflection View -->
        <div id="reflection" class="view">
            <div class="card">
                <h2 class="section-title">Tägliche Selbstreflexion</h2>
                
                <div class="reflection-wizard">
                    <!-- Step Progress Indicator -->
                    <div class="step-progress">
                        <div class="step-indicator current" id="step-1">1</div>
                        <div class="step-connector" id="connector-1"></div>
                        <div class="step-indicator pending" id="step-2">2</div>
                        <div class="step-connector" id="connector-2"></div>
                        <div class="step-indicator pending" id="step-3">3</div>
                        <div class="step-connector" id="connector-3"></div>
                        <div class="step-indicator pending" id="step-4">4</div>
                        <div class="step-connector" id="connector-4"></div>
                        <div class="step-indicator pending" id="step-5">5</div>
                    </div>

                    <!-- Step 1: Concentration -->
                    <div class="reflection-step active" id="reflection-step-1">
                        <div class="step-title">🧠 Konzentration</div>
                        <div class="step-question">Wie konzentriert warst du heute im Unterricht?</div>
                        
                        <div class="smiley-rating-container">
                            <div class="smiley-option" data-category="concentration" data-value="schlecht">
                                <div class="smiley-emoji">😞</div>
                                <div class="smiley-label">Schlecht<br><small>War oft abgelenkt</small></div>
                            </div>
                            <div class="smiley-option" data-category="concentration" data-value="mittel">
                                <div class="smiley-emoji">😐</div>
                                <div class="smiley-label">Mittel<br><small>Manchmal abgeschweift</small></div>
                            </div>
                            <div class="smiley-option" data-category="concentration" data-value="gut">
                                <div class="smiley-emoji">😊</div>
                                <div class="smiley-label">Gut<br><small>Voll fokussiert</small></div>
                            </div>
                        </div>
                        
                        <div class="feedback-section" id="concentration-feedback">
                            <textarea class="feedback-input" placeholder="Was hat dich abgelenkt? Wie könntest du dich nächstes Mal besser konzentrieren? (optional)"></textarea>
                        </div>
                    </div>

                    <!-- Step 2: Participation -->
                    <div class="reflection-step" id="reflection-step-2">
                        <div class="step-title">🙋‍♂️ Mitarbeit</div>
                        <div class="step-question">Wie aktiv hast du am Unterricht teilgenommen?</div>
                        
                        <div class="smiley-rating-container">
                            <div class="smiley-option" data-category="participation" data-value="schlecht">
                                <div class="smiley-emoji">😞</div>
                                <div class="smiley-label">Selten<br><small>Kaum gemeldet</small></div>
                            </div>
                            <div class="smiley-option" data-category="participation" data-value="mittel">
                                <div class="smiley-emoji">😐</div>
                                <div class="smiley-label">Manchmal<br><small>Ein paar Mal gemeldet</small></div>
                            </div>
                            <div class="smiley-option" data-category="participation" data-value="gut">
                                <div class="smiley-emoji">😊</div>
                                <div class="smiley-label">Aktiv<br><small>Oft mitgemacht</small></div>
                            </div>
                        </div>
                        
                        <div class="feedback-section" id="participation-feedback">
                            <textarea class="feedback-input" placeholder="Was hält dich davon ab, dich öfter zu melden? (optional)"></textarea>
                        </div>
                    </div>

                    <!-- Step 3: Homework -->
                    <div class="reflection-step" id="reflection-step-3">
                        <div class="step-title">📝 Hausaufgaben</div>
                        <div class="step-question">Wie gewissenhaft hast du deine Hausaufgaben gemacht?</div>
                        
                        <div class="smiley-rating-container">
                            <div class="smiley-option" data-category="homework" data-value="schlecht">
                                <div class="smiley-emoji">😞</div>
                                <div class="smiley-label">Schlecht<br><small>Nicht gemacht</small></div>
                            </div>
                            <div class="smiley-option" data-category="homework" data-value="mittel">
                                <div class="smiley-emoji">😐</div>
                                <div class="smiley-label">Teilweise<br><small>Nur das Wichtigste</small></div>
                            </div>
                            <div class="smiley-option" data-category="homework" data-value="gut">
                                <div class="smiley-emoji">😊</div>
                                <div class="smiley-label">Vollständig<br><small>Alles erledigt</small></div>
                            </div>
                        </div>
                        
                        <div class="feedback-section" id="homework-feedback">
                            <textarea class="feedback-input" placeholder="Was war schwierig bei den Hausaufgaben? Was könnte dir helfen? (optional)"></textarea>
                        </div>
                    </div>

                    <!-- Step 4: Understanding -->
                    <div class="reflection-step" id="reflection-step-4">
                        <div class="step-title">💡 Verstehen</div>
                        <div class="step-question">Wie gut hast du den Unterrichtsstoff heute verstanden?</div>
                        
                        <div class="smiley-rating-container">
                            <div class="smiley-option" data-category="understanding" data-value="schlecht">
                                <div class="smiley-emoji">😞</div>
                                <div class="smiley-label">Schwierig<br><small>Vieles unklar</small></div>
                            </div>
                            <div class="smiley-option" data-category="understanding" data-value="mittel">
                                <div class="smiley-emoji">😐</div>
                                <div class="smiley-label">Teilweise<br><small>Einiges verstanden</small></div>
                            </div>
                            <div class="smiley-option" data-category="understanding" data-value="gut">
                                <div class="smiley-emoji">😊</div>
                                <div class="smiley-label">Gut<br><small>Alles klar</small></div>
                            </div>
                        </div>
                        
                        <div class="feedback-section" id="understanding-feedback">
                            <textarea class="feedback-input" placeholder="Was war besonders schwer zu verstehen? Wo brauchst du Hilfe? (optional)"></textarea>
                        </div>
                    </div>

                    <!-- Step 5: Overall Day -->
                    <div class="reflection-step" id="reflection-step-5">
                        <div class="step-title">🌟 Gesamtbewertung</div>
                        <div class="step-question">Wie lief dein Schultag heute insgesamt?</div>
                        
                        <div class="smiley-rating-container">
                            <div class="smiley-option" data-category="overall" data-value="schlecht">
                                <div class="smiley-emoji">😞</div>
                                <div class="smiley-label">Schwierig<br><small>War nicht mein Tag</small></div>
                            </div>
                            <div class="smiley-option" data-category="overall" data-value="mittel">
                                <div class="smiley-emoji">😐</div>
                                <div class="smiley-label">Okay<br><small>Ging so</small></div>
                            </div>
                            <div class="smiley-option" data-category="overall" data-value="gut">
                                <div class="smiley-emoji">😊</div>
                                <div class="smiley-label">Gut<br><small>Lief richtig gut!</small></div>
                            </div>
                        </div>
                        
                        <div class="feedback-section" id="overall-feedback">
                            <textarea class="feedback-input" placeholder="Was war heute besonders gut oder schlecht? Was nimmst du dir für morgen vor? (optional)"></textarea>
                        </div>
                    </div>

                    <!-- Completion Screen -->
                    <div class="reflection-step" id="reflection-completion">
                        <div class="completion-card">
                            <div class="completion-emoji">🎉</div>
                            <div class="completion-title">Reflexion abgeschlossen!</div>
                            <div class="completion-message">
                                Toll gemacht! Du hast dir Zeit genommen, über deinen Tag nachzudenken.
                            </div>
                            
                            <div class="trophies-earned">
                                🏆 <strong>+25 Trophäen erhalten!</strong>
                            </div>
                            
                            <div style="background: #f0fdf4; border-radius: 12px; padding: 1.5rem; margin: 2rem 0; text-align: left;">
                                <h3 style="color: #16a34a; margin-bottom: 1rem;">💭 Deine heutige Reflexion:</h3>
                                <div id="reflection-summary"></div>
                            </div>
                            
                            <button class="btn btn-primary" onclick="completeReflection()">
                                Zurück zum Dashboard
                            </button>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="step-navigation">
                        <button class="btn btn-secondary" id="prev-btn" onclick="previousStep()" disabled>
                            ← Zurück
                        </button>
                        
                        <div style="text-align: center; color: #64748b;">
                            Schritt <span id="current-step-number">1</span> von 5
                        </div>
                        
                        <button class="btn btn-primary" id="next-btn" onclick="nextStep()" disabled>
                            Weiter →
                        </button>
                    </div>
                </div>
            </div>

            <!-- Lesson Rating Section (Separate from main reflection) -->
            <div class="card lesson-rating-section">
                <h2 class="section-title">Einzelne Schulstunde bewerten</h2>
                <p style="color: #64748b; margin-bottom: 2rem;">
                    Bewerte einzelne Schulstunden - das bringt dir zusätzliche Trophäen!
                </p>

                <div class="lesson-input-container">
                    <div class="form-group">
                        <label style="font-weight: bold; margin-bottom: 0.5rem; display: block;">Fach auswählen:</label>
                        <select id="lesson-subject" class="form-input">
                            <option value="">Fach wählen...</option>
                            <option value="Mathematik">Mathematik</option>
                            <option value="Deutsch">Deutsch</option>
                            <option value="Englisch">Englisch</option>
                            <option value="Geschichte">Geschichte</option>
                            <option value="Biologie">Biologie</option>
                            <option value="Physik">Physik</option>
                            <option value="Chemie">Chemie</option>
                            <option value="Sport">Sport</option>
                            <option value="Kunst">Kunst</option>
                            <option value="Musik">Musik</option>
                        </select>
                    </div>

                    <div style="margin-top: 1.5rem;">
                        <div style="font-weight: bold; margin-bottom: 0.5rem;">Wie lief die Stunde?</div>
                        <div class="smiley-rating-container">
                            <div class="smiley-option" data-category="lesson" data-value="schlecht">
                                <div class="smiley-emoji">😞</div>
                                <div class="smiley-label">Schlecht</div>
                            </div>
                            <div class="smiley-option" data-category="lesson" data-value="mittel">
                                <div class="smiley-emoji">😐</div>
                                <div class="smiley-label">Mittel</div>
                            </div>
                            <div class="smiley-option" data-category="lesson" data-value="gut">
                                <div class="smiley-emoji">😊</div>
                                <div class="smiley-label">Gut</div>
                            </div>
                        </div>
                        <div class="feedback-section" id="lesson-feedback">
                            <textarea class="feedback-input" placeholder="Was lief nicht so gut? Was war schwierig? (optional)"></textarea>
                        </div>
                    </div>

                    <button id="submit-lesson-rating" class="button-primary" style="margin-top: 1rem; width: 100%;" disabled>
                        Stundenbewertung abgeben (+15 Trophäen)
                    </button>
                </div>

                <!-- Recent Lesson Ratings -->
                <div style="margin-top: 2rem;">
                    <h3 style="font-weight: bold; margin-bottom: 1rem;">Letzte Stundenbewertungen:</h3>
                    <div id="recent-lesson-ratings">
                        <div class="activity-item grade">
                            <div class="activity-icon">📚</div>
                            <span>Mathematik: 😊 Gut - Heute, 10:30 (+15 Trophäen)</span>
                        </div>
                        <div class="activity-item grade">
                            <div class="activity-icon">📚</div>
                            <span>Deutsch: 😐 Mittel - Heute, 09:45 (+15 Trophäen)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Grades View -->
        <div id="grades" class="view">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2 class="section-title" style="margin: 0;">Meine Noten</h2>
                    <button class="add-button" onclick="openAddGradeModal()">
                        ➕ Note hinzufügen
                    </button>
                </div>

                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <div class="stat-icon green">📊</div>
                        <div>
                            <div class="stat-value" id="grade-average">2.0</div>
                            <div class="stat-label">Durchschnitt</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">📝</div>
                        <div>
                            <div class="stat-value" id="grade-count">4</div>
                            <div class="stat-label">Anzahl Noten</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon yellow">🌟</div>
                        <div>
                            <div class="stat-value" id="best-grade">1.8</div>
                            <div class="stat-label">Beste Note</div>
                        </div>
                    </div>
                </div>

                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Fach</th>
                                <th>Note</th>
                                <th>Art</th>
                                <th>Datum</th>
                            </tr>
                        </thead>
                        <tbody id="grades-table">
                            <tr>
                                <td><strong>Mathematik</strong></td>
                                <td><span class="grade-good">2.3</span></td>
                                <td>Klassenarbeit</td>
                                <td>15.11.2024</td>
                            </tr>
                            <tr>
                                <td><strong>Deutsch</strong></td>
                                <td><span class="grade-excellent">1.8</span></td>
                                <td>Aufsatz</td>
                                <td>12.11.2024</td>
                            </tr>
                            <tr>
                                <td><strong>Englisch</strong></td>
                                <td><span class="grade-good">2.1</span></td>
                                <td>Vokabeltest</td>
                                <td>10.11.2024</td>
                            </tr>
                            <tr>
                                <td><strong>Geschichte</strong></td>
                                <td><span class="grade-excellent">1.9</span></td>
                                <td>Referat</td>
                                <td>08.11.2024</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Liga/Leaderboard View -->
        <div id="leaderboard" class="view">
            <div class="card">
                <h2 class="section-title">🏆 Liga Rangliste</h2>
                <p style="color: #64748b; margin-bottom: 2rem;">
                    Hier siehst du deine Position in der aktuellen Liga. Sammle Trophäen durch Noten und Aktivitäten!
                </p>
                
                <div class="stats-grid" style="margin-bottom: 2rem;">
                    <div class="stat-card">
                        <div class="stat-icon yellow">🏆</div>
                        <div>
                            <div class="stat-value">2,850</div>
                            <div class="stat-label">Deine Trophäen</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon blue">#</div>
                        <div>
                            <div class="stat-value">#247</div>
                            <div class="stat-label">Liga Rang</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon purple">🥇</div>
                        <div>
                            <div class="stat-value">Gold</div>
                            <div class="stat-label">Aktuelle Liga</div>
                        </div>
                    </div>
                </div>

                <div class="empty-state">
                    <div class="empty-state-icon">🚧</div>
                    <h3>Liga-System in Entwicklung</h3>
                    <p>Das vollständige Leaderboard wird bald verfügbar sein!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Grade Modal -->
    <div id="addGradeModal" class="modal">
        <div class="modal-content">
            <button class="close-button" onclick="closeAddGradeModal()">&times;</button>
            <h3 class="modal-title">Neue Note hinzufügen</h3>
            
            <div class="form-group">
                <input type="text" id="grade-subject" class="form-input" placeholder="Fach (z.B. Mathematik)">
            </div>
            
            <div class="form-group">
                <input type="number" id="grade-value" class="form-input" placeholder="Note (1.0 - 6.0)" step="0.1" min="1" max="6">
            </div>
            
            <div class="form-group">
                <input type="text" id="grade-type" class="form-input" placeholder="Art (z.B. Klassenarbeit, Test, ...)">
            </div>
            
            <div class="form-group">
                <input type="date" id="grade-date" class="form-input">
            </div>
            
            <div class="modal-buttons">
                <button class="button-secondary" onclick="closeAddGradeModal()">Abbrechen</button>
                <button class="button-primary" onclick="addGrade()">Hinzufügen</button>
            </div>
            
        </div>
    </div>


<!--stundeplan-->
<!-- Stundenplan View -->
<div id="Stundenplan" class="view">
<h1>liga oder so</h1>
</div>




<div class="teacher-attendance-panel" id="teacher-panel" style="display: none;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
        <h3 style="margin: 0; color: #1e293b;">📋 Anwesenheit erfassen</h3>
        <div style="font-size: 0.9rem; color: #64748b;">
            <span id="current-lesson-info">Mathematik - Raum 201</span>
            <span class="live-indicator">
                <div class="live-dot"></div>
                Live
            </span>
        </div>
    </div>
    
    <div class="students-list">
        <!-- Student: Max Mustermann -->
        <div class="student-row">
            <div class="student-name">Max Mustermann</div>
            <div class="attendance-buttons">
                <button class="attendance-btn present" onclick="setStudentAttendance('max_mustermann', 'anwesend')">
                    ✅ Anwesend
                </button>
                <button class="attendance-btn late" onclick="setStudentAttendance('max_mustermann', 'verspätet')">
                    🕗 Verspätet  
                </button>
                <button class="attendance-btn absent" onclick="setStudentAttendance('max_mustermann', 'abwesend')">
                    ❌ Abwesend
                </button>
            </div>
        </div>
        
        <!-- Weitere Schüler können hier hinzugefügt werden -->
        <div class="student-row">
            <div class="student-name">Anna Schmidt</div>
            <div class="attendance-buttons">
                <button class="attendance-btn present" onclick="setStudentAttendance('anna_schmidt', 'anwesend')">
                    ✅ Anwesend
                </button>
                <button class="attendance-btn late" onclick="setStudentAttendance('anna_schmidt', 'verspätet')">
                    🕗 Verspätet
                </button>
                <button class="attendance-btn absent" onclick="setStudentAttendance('anna_schmidt', 'abwesend')">
                    ❌ Abwesend
                </button>
            </div>
        </div>
        
        <div class="student-row">
            <div class="student-name">Tom Weber</div>
            <div class="attendance-buttons">
                <button class="attendance-btn present" onclick="setStudentAttendance('tom_weber', 'anwesend')">
                    ✅ Anwesend
                </button>
                <button class="attendance-btn late" onclick="setStudentAttendance('tom_weber', 'verspätet')">
                    🕗 Verspätet
                </button>
                <button class="attendance-btn absent" onclick="setStudentAttendance('tom_weber', 'abwesend')">
                    ❌ Abwesend
                </button>
            </div>
        </div>
    </div>
    
    <!-- Quick Actions für Lehrer -->
    <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
            <button class="btn btn-secondary" onclick="markAllPresent()">
                ✅ Alle Anwesend
            </button>
            <button class="btn btn-secondary" onclick="exportAttendance()">
                📊 Export
            </button>
            <button class="btn btn-secondary" onclick="toggleTeacherPanel()">
                👁️ Schüler-Sicht
            </button>
        </div>
    </div>
</div>

<!-- Toggle Button für Demo-->
<div style="position: fixed; top: 100px; right: 20px; z-index: 1000;">
    <button 
        class="btn btn-primary" 
        onclick="toggleTeacherPanel()" 
        title="Lehrer-Interface ein/ausblenden"
        style="border-radius: 50%; width: 60px; height: 60px; font-size: 1.5rem;"
    >
        👨‍🏫
    </button>
</div>

<!-- JavaScript für das Lehrer Interface -->
<script>
// Lehrer Interface Funktionen
function setStudentAttendance(studentId, status) {
    // Verwende die bestehende teacherInterface Funktion
    if (typeof teacherInterface !== 'undefined') {
        teacherInterface.setAttendance(studentId, status);
    } else {
        // Fallback wenn System noch nicht initialisiert
        updateStudentAttendance({
            studentId: studentId,
            status: status,
            timestamp: new Date(),
            lesson: getCurrentLesson()
        });
    }
    
    // Visuelles Feedback
    showTeacherNotification(`${getStudentName(studentId)} als ${status} markiert`);
}

function getStudentName(studentId) {
    const names = {
        'max_mustermann': 'Max Mustermann',
        'anna_schmidt': 'Anna Schmidt', 
        'tom_weber': 'Tom Weber'
    };
    return names[studentId] || studentId;
}

function toggleTeacherPanel() {
    const panel = document.getElementById('teacher-panel');
    if (panel.style.display === 'none') {
        panel.style.display = 'block';
    } else {
        panel.style.display = 'none';
    }
}

function markAllPresent() {
    const students = ['max_mustermann', 'anna_schmidt', 'tom_weber'];
    students.forEach(student => {
        setStudentAttendance(student, 'anwesend');
    });
}

function exportAttendance() {
    showTeacherNotification('Anwesenheit exportiert!');
    // Hier würdest du die Export-Logik implementieren
}

function showTeacherNotification(message) {
    if (typeof showNotification === 'function') {
        showNotification('👨‍🏫 Lehrer: ' + message);
    }
}

// Aktualisiere Lehrer-Interface
function updateTeacherInterface() {
    const lesson = getCurrentLesson();
    const lessonInfo = document.getElementById('current-lesson-info');
    
    if (lesson && lessonInfo) {
        lessonInfo.textContent = `${lesson.subject} - ${lesson.room}`;
    }
}

// Initialisierung
document.addEventListener('DOMContentLoaded', function() {
    updateTeacherInterface();
    
    // Update alle 5 Sekunden
    setInterval(updateTeacherInterface, 5000);
});
</script>






<p style="text-align: center; color: darkgrey;">Made by <a style="color: dimgrey;" href="../FirmWeb/Firma.html">MindOrbit</a></p>
    <!-- Notification -->
    <div id="notification" class="notification">
        <span id="notification-text"></span>
    </div>


    <script>
        // App State
        let appState = {
            userTrophies: 2850,
            currentStep: 1,
            totalSteps: 5,
            dailyReflection: {
                concentration: null,
                participation: null,
                homework: null,
                understanding: null,
                overall: null
            },
            reflectionFeedback: {
                concentration: '',
                participation: '',
                homework: '',
                understanding: '',
                overall: ''
            },
            reflectionCompleted: false,
            currentLessonRating: null,
            selectedSubject: '',
            lessonRatings: [
                { subject: 'Mathematik', rating: 'gut', time: 'Heute, 10:30', trophies: 15 },
                { subject: 'Deutsch', rating: 'mittel', time: 'Heute, 09:45', trophies: 15 }
            ],
            grades: [
                { id: 1, subject: 'Mathematik', grade: 2.3, date: '2024-11-15', type: 'Klassenarbeit' },
                { id: 2, subject: 'Deutsch', grade: 1.8, date: '2024-11-12', type: 'Aufsatz' },
                { id: 3, subject: 'Englisch', grade: 2.1, date: '2024-11-10', type: 'Vokabeltest' },
                { id: 4, subject: 'Geschichte', grade: 1.9, date: '2024-11-08', type: 'Referat' }
            ]
        };

        // Utility Functions
        function calculateGradeAverage() {
            if (appState.grades.length === 0) return 0;
            const sum = appState.grades.reduce((acc, grade) => acc + grade.grade, 0);
            return (sum / appState.grades.length).toFixed(1);
        }

        function getTrophiesFromGrade(grade) {
            if (grade <= 1.5) return 50;
            if (grade <= 2.0) return 40;
            if (grade <= 2.5) return 30;
            if (grade <= 3.0) return 20;
            if (grade <= 3.5) return 15;
            return 10;
        }

        function getGradeClass(grade) {
            if (grade <= 2.0) return 'grade-excellent';
            if (grade <= 2.5) return 'grade-good';
            if (grade <= 3.5) return 'grade-average';
            return 'grade-poor';
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notificationText.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function getRatingEmoji(rating) {
            switch(rating) {
                case 'schlecht': return '😞';
                case 'mittel': return '😐';
                case 'gut': return '😊';
                default: return '😐';
            }
        }

        function getRatingText(rating) {
            switch(rating) {
                case 'schlecht': return 'Schlecht';
                case 'mittel': return 'Mittel';
                case 'gut': return 'Gut';
                default: return 'Nicht bewertet';
            }
        }

        // Navigation
        function switchView(viewName) {
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            
            document.getElementById(viewName).classList.add('active');
            
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.querySelectorAll(`[data-view="${viewName}"]`).forEach(btn => {
                btn.classList.add('active');
            });

            document.getElementById('mobile-nav').classList.remove('active');
        }

        // Step-by-step Reflection System
        function nextStep() {
            if (appState.currentStep < appState.totalSteps) {
                appState.currentStep++;
                updateStepDisplay();
            } else {
                showCompletionScreen();
            }
        }

        function previousStep() {
            if (appState.currentStep > 1) {
                appState.currentStep--;
                updateStepDisplay();
            }
        }

        function updateStepDisplay() {
            // Hide all steps
            document.querySelectorAll('.reflection-step').forEach(step => {
                step.classList.remove('active');
            });

            // Show current step
            document.getElementById(`reflection-step-${appState.currentStep}`).classList.add('active');

            // Update progress indicators
            for (let i = 1; i <= appState.totalSteps; i++) {
                const stepIndicator = document.getElementById(`step-${i}`);
                const connector = document.getElementById(`connector-${i}`);
                
                if (i < appState.currentStep) {
                    stepIndicator.className = 'step-indicator completed';
                    stepIndicator.innerHTML = '✓';
                    if (connector) connector.className = 'step-connector completed';
                } else if (i === appState.currentStep) {
                    stepIndicator.className = 'step-indicator current';
                    stepIndicator.innerHTML = i;
                    if (connector) connector.className = 'step-connector';
                } else {
                    stepIndicator.className = 'step-indicator pending';
                    stepIndicator.innerHTML = i;
                    if (connector) connector.className = 'step-connector';
                }
            }

            // Update navigation buttons
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            prevBtn.disabled = appState.currentStep === 1;
            
            // Check if current step has a selection
            const currentStepKey = getStepKey(appState.currentStep);
            const hasSelection = appState.dailyReflection[currentStepKey] !== null;
            nextBtn.disabled = !hasSelection;

            if (appState.currentStep === appState.totalSteps) {
                nextBtn.textContent = 'Abschließen 🎉';
            } else {
                nextBtn.textContent = 'Weiter →';
            }

            // Update step counter
            document.getElementById('current-step-number').textContent = appState.currentStep;
        }

        function getStepKey(stepNumber) {
            const stepKeys = ['', 'concentration', 'participation', 'homework', 'understanding', 'overall'];
            return stepKeys[stepNumber];
        }

        function showCompletionScreen() {
            // Hide all steps
            document.querySelectorAll('.reflection-step').forEach(step => {
                step.classList.remove('active');
            });

            // Show completion screen
            document.getElementById('reflection-completion').classList.add('active');

            // Hide navigation
            document.querySelector('.step-navigation').style.display = 'none';

            // Generate summary
            generateReflectionSummary();

            // Mark as completed
            appState.reflectionCompleted = true;
        }

        function generateReflectionSummary() {
            const summaryContainer = document.getElementById('reflection-summary');
            const categories = [
                { key: 'concentration', label: '🧠 Konzentration', icon: '🧠' },
                { key: 'participation', label: '🙋‍♂️ Mitarbeit', icon: '🙋‍♂️' },
                { key: 'homework', label: '📝 Hausaufgaben', icon: '📝' },
                { key: 'understanding', label: '💡 Verstehen', icon: '💡' },
                { key: 'overall', label: '🌟 Gesamt', icon: '🌟' }
            ];

            let summaryHTML = '';
            categories.forEach(cat => {
                const rating = appState.dailyReflection[cat.key];
                const emoji = getRatingEmoji(rating);
                const text = getRatingText(rating);
                
                summaryHTML += `
                    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem; padding: 0.5rem; background: white; border-radius: 8px;">
                        <span style="font-size: 1.2rem;">${cat.icon}</span>
                        <span style="flex: 1; font-weight: 600;">${cat.label.replace(cat.icon + ' ', '')}</span>
                        <span style="font-size: 1.5rem;">${emoji}</span>
                        <span style="color: #64748b; min-width: 60px;">${text}</span>
                    </div>
                `;
            });

            summaryContainer.innerHTML = summaryHTML;
        }

        function completeReflection() {
            // Award trophies
            appState.userTrophies += 25;
            updateDashboard();
            
            // Show notification
            showNotification('Reflexion abgeschlossen! +25 Trophäen erhalten!');
            
            // Switch to dashboard
            switchView('dashboard');
            
            // Reset reflection for next time
            resetReflection();
        }

        function resetReflection() {
            appState.currentStep = 1;
            appState.dailyReflection = {
                concentration: null,
                participation: null,
                homework: null,
                understanding: null,
                overall: null
            };
            appState.reflectionFeedback = {
                concentration: '',
                participation: '',
                homework: '',
                understanding: '',
                overall: ''
            };
            
            // Reset UI
            document.querySelector('.step-navigation').style.display = 'flex';
            document.getElementById('reflection-completion').classList.remove('active');
            updateStepDisplay();
            
            // Clear all selections
            document.querySelectorAll('.smiley-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Clear feedback areas
            document.querySelectorAll('.feedback-section').forEach(section => {
                section.classList.remove('show');
            });
            
            document.querySelectorAll('.feedback-input').forEach(input => {
                input.value = '';
            });
        }

        // Smiley Rating System for Steps
        function setupStepSmileyRatings() {
            document.querySelectorAll('.smiley-option').forEach(option => {
                option.addEventListener('click', (e) => {
                    const category = option.getAttribute('data-category');
                    const value = option.getAttribute('data-value');
                    
                    // Skip lesson ratings in this setup
                    if (category === 'lesson') return;
                    
                    // Remove selected from siblings
                    const siblings = option.parentElement.querySelectorAll('.smiley-option');
                    siblings.forEach(sibling => sibling.classList.remove('selected'));
                    
                    // Add selected to clicked option
                    option.classList.add('selected');
                    
                    // Update app state
                    appState.dailyReflection[category] = value;
                    
                    // Handle feedback section visibility
                    const feedbackSection = document.getElementById(`${category}-feedback`);
                    if (feedbackSection) {
                        if (value === 'schlecht' || value === 'mittel') {
                            feedbackSection.classList.add('show');
                        } else {
                            feedbackSection.classList.remove('show');
                        }
                    }
                    
                    // Update next button state
                    updateStepDisplay();
                });
            });
        }

        // Lesson Rating System (separate from step system)
        function setupLessonRating() {
            const subjectSelect = document.getElementById('lesson-subject');
            const submitBtn = document.getElementById('submit-lesson-rating');
            
            subjectSelect.addEventListener('change', (e) => {
                appState.selectedSubject = e.target.value;
                updateLessonSubmitButton();
            });
            
            // Handle lesson smiley ratings separately
            document.querySelectorAll('[data-category="lesson"]').forEach(option => {
                option.addEventListener('click', (e) => {
                    const value = option.getAttribute('data-value');
                    
                    // Remove selected from lesson rating siblings
                    const siblings = option.parentElement.querySelectorAll('[data-category="lesson"]');
                    siblings.forEach(sibling => sibling.classList.remove('selected'));
                    
                    // Add selected to clicked option
                    option.classList.add('selected');
                    
                    // Update app state
                    appState.currentLessonRating = value;
                    
                    // Handle feedback visibility
                    const feedbackSection = document.getElementById('lesson-feedback');
                    if (value === 'schlecht' || value === 'mittel') {
                        feedbackSection.classList.add('show');
                    } else {
                        feedbackSection.classList.remove('show');
                    }
                    
                    updateLessonSubmitButton();
                });
            });
            
            submitBtn.addEventListener('click', () => {
                if (!appState.selectedSubject || !appState.currentLessonRating) {
                    showNotification('Bitte wähle ein Fach und eine Bewertung!');
                    return;
                }
                
                // Add lesson rating
                const now = new Date();
                const timeString = `Heute, ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                const newRating = {
                    subject: appState.selectedSubject,
                    rating: appState.currentLessonRating,
                    time: timeString,
                    trophies: 15
                };
                
                appState.lessonRatings.unshift(newRating);
                appState.userTrophies += 15;
                
                // Reset form
                subjectSelect.value = '';
                document.querySelectorAll('[data-category="lesson"]').forEach(option => {
                    option.classList.remove('selected');
                });
                document.getElementById('lesson-feedback').classList.remove('show');
                submitBtn.disabled = true;
                appState.selectedSubject = '';
                appState.currentLessonRating = null;
                
                // Update displays
                updateLessonRatingsDisplay();
                updateDashboard();
                
                showNotification('Stundenbewertung abgegeben! +5 Trophäen erhalten!');
            });
        }

        function updateLessonSubmitButton() {
            const submitBtn = document.getElementById('submit-lesson-rating');
            if (appState.selectedSubject && appState.currentLessonRating) {
                submitBtn.disabled = false;
            } else {
                submitBtn.disabled = true;
            }
        }

        function updateLessonRatingsDisplay() {
            const container = document.getElementById('recent-lesson-ratings');
            container.innerHTML = '';
            
            appState.lessonRatings.slice(0, 5).forEach(rating => {
                const emoji = getRatingEmoji(rating.rating);
                const ratingText = getRatingText(rating.rating);
                
                const item = document.createElement('div');
                item.className = 'activity-item grade';
                item.innerHTML = `
                    <div class="activity-icon">📚</div>
                    <span>${rating.subject}: ${emoji} ${ratingText} - ${rating.time} (+${rating.trophies} Trophäen)</span>
                `;
                container.appendChild(item);
            });
        }

        // Grade Functions
        function openAddGradeModal() {
            document.getElementById('addGradeModal').classList.add('active');
            document.getElementById('grade-date').valueAsDate = new Date();
        }

        function closeAddGradeModal() {
            document.getElementById('addGradeModal').classList.remove('active');
            document.getElementById('grade-subject').value = '';
            document.getElementById('grade-value').value = '';
            document.getElementById('grade-type').value = '';
            document.getElementById('grade-date').value = '';
        }

        function addGrade() {
            const subject = document.getElementById('grade-subject').value;
            const grade = parseFloat(document.getElementById('grade-value').value);
            const type = document.getElementById('grade-type').value;
            const date = document.getElementById('grade-date').value;
            
            if (!subject || !grade || !type || !date) {
                alert('Bitte fülle alle Felder aus!');
                return;
            }
            
            if (grade < 1 || grade > 6) {
                alert('Die Note muss zwischen 1.0 und 6.0 liegen!');
                return;
            }
            
            const newGrade = {
                id: appState.grades.length + 1,
                subject,
                grade,
                type,
                date
            };
            
            appState.grades.push(newGrade);
            
            const trophies = getTrophiesFromGrade(grade);
            appState.userTrophies += trophies;
            
            updateGradesTable();
            updateDashboard();
            closeAddGradeModal();
            
            showNotification(`Note hinzugefügt! +${trophies} Trophäen erhalten!`);
        }

        function updateGradesTable() {
            const tbody = document.getElementById('grades-table');
            tbody.innerHTML = '';
            
            const sortedGrades = [...appState.grades].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedGrades.forEach(grade => {
                const row = document.createElement('tr');
                const formattedDate = new Date(grade.date).toLocaleDateString('de-DE');
                
                row.innerHTML = `
                    <td><strong>${grade.subject}</strong></td>
                    <td><span class="${getGradeClass(grade.grade)}">${grade.grade}</span></td>
                    <td>${grade.type}</td>
                    <td>${formattedDate}</td>
                `;
                
                tbody.appendChild(row);
            });
            
            const average = calculateGradeAverage();
            document.getElementById('grade-average').textContent = average;
            document.getElementById('average-grade').textContent = average;
            document.getElementById('grade-count').textContent = appState.grades.length;
            
            if (appState.grades.length > 0) {
                const bestGrade = Math.min(...appState.grades.map(g => g.grade));
                document.getElementById('best-grade').textContent = bestGrade;
            }
        }

        // Dashboard Functions
        function updateDashboard() {
            document.getElementById('user-points').textContent = `${appState.userTrophies.toLocaleString()} Trophäen`;
            
            // Update all trophy displays
            document.querySelectorAll('.stat-value').forEach(el => {
                if (el.textContent.includes('2,850') || el.textContent.includes(',')) {
                    if (el.parentElement.querySelector('.stat-label').textContent === 'Trophäen') {
                        el.textContent = appState.userTrophies.toLocaleString();
                    }
                }
            });
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Navigation events
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', (e) => {
                    const view = e.currentTarget.getAttribute('data-view');
                    switchView(view);
                });
            });
            
            // Mobile menu toggle
            document.getElementById('hamburger-menu').addEventListener('click', () => {
                document.getElementById('mobile-nav').classList.toggle('active');
            });
            
            // Modal events
            document.getElementById('addGradeModal').addEventListener('click', (e) => {
                if (e.target.id === 'addGradeModal') {
                    closeAddGradeModal();
                }
            });
            
            // Setup interactive elements
            setupStepSmileyRatings();
            setupLessonRating();
            
            // Initial updates
            updateDashboard();
            updateGradesTable();
            updateLessonRatingsDisplay();
            updateStepDisplay();
        });

   // Motivationssprüche für das neue Design
const quotes = [
    { text: "Jeder Tag ist eine neue Chance, besser zu werden als gestern.", author: "Unbekannt" },
    { text: "Kleine Fortschritte jeden Tag führen zu großen Ergebnissen.", author: "Satya Nani" },
    { text: "Der Schlüssel zum Erfolg ist, mit dem zu beginnen, was du hast.", author: "Arthur Ashe" },
    { text: "Bildung ist der Schlüssel, der goldene Türen öffnet.", author: "George Washington Carver" },
    { text: "Du schaffst das! Glaub an dich.", author: "Unbekannt" },
    { text: "Erfolg ist die Summe kleiner Anstrengungen, die täglich wiederholt werden.", author: "Robert Collier" },
    { text: "Lass nicht zu, dass das, was du nicht kannst, im Weg steht dem, was du kannst.", author: "John Wooden" },
    { text: "Ein Traum ohne Plan ist nur ein Wunsch.", author: "Unbekannt" },
    { text: "Ein Ziel ohne Plan ist nur ein Wunsch.", author: "Antoine de Saint-Exupéry" }
];

// Kalender Variablen
let currentMonth = new Date().getMonth();
let currentYear = new Date().getFullYear();

// Mood Check-in Variablen
let selectedMood = null;

// Kalender Funktionen
function generateCalendar(month, year) {
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const today = new Date();
    
    const monthNames = [
        "Januar", "Februar", "März", "April", "Mai", "Juni",
        "Juli", "August", "September", "Oktober", "November", "Dezember"
    ];
    
    const dayNames = ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"];
    
    // Update Header
    document.getElementById('calendar-month-year').textContent = `${monthNames[month]} ${year}`;
    
    // Generate Calendar
    const calendar = document.getElementById('mini-calendar');
    calendar.innerHTML = '';
    
    // Day headers
    dayNames.forEach(day => {
        const dayHeader = document.createElement('div');
        dayHeader.className = 'calendar-day-header';
        dayHeader.textContent = day;
        calendar.appendChild(dayHeader);
    });
    
    // Empty cells for days before month starts
    for (let i = 0; i < firstDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day';
        calendar.appendChild(emptyDay);
    }
    
    // Days of the month
    for (let day = 1; day <= daysInMonth; day++) {
        const dayElement = document.createElement('div');
        dayElement.className = 'calendar-day';
        dayElement.textContent = day;
        
        // Mark today
        if (year === today.getFullYear() &&
            month === today.getMonth() &&
            day === today.getDate()) {
            dayElement.classList.add('today');
        }
        
        // Mark days with events (example)
        if ([12, 15, 18, 22].includes(day)) {
            dayElement.classList.add('has-event');
        }
        
        calendar.appendChild(dayElement);
    }
}

function changeMonth(direction) {
    currentMonth += direction;
    
    if (currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
    } else if (currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
    }
    
    generateCalendar(currentMonth, currentYear);
}

// Mood Check-in Funktionen
function selectMood(element, mood) {
    // Remove previous selection
    document.querySelectorAll('.mood-option').forEach(option => {
        option.classList.remove('selected');
    });
    
    // Add selection to clicked element
    element.classList.add('selected');
    selectedMood = mood;
    
    // Enable submit button
    document.querySelector('.checkin-submit').disabled = false;
}

function submitMoodCheckin() {
    if (!selectedMood) return;
    
    const note = document.getElementById('mood-note').value;
    
    // Hier würdest du die Daten speichern
    console.log('Mood Check-in:', { mood: selectedMood, note: note, date: new Date() });
    
    // Show success
    showNotification(`Mood Check-in gespeichert! Du fühlst dich heute ${selectedMood}. +2 Trophäen!`);
    
    // Add trophies
    appState.userTrophies += 5;
    updateDashboard();
    
    // Reset form
    document.querySelectorAll('.mood-option').forEach(option => {
        option.classList.remove('selected');
    });
    document.getElementById('mood-note').value = '';
    document.querySelector('.checkin-submit').disabled = true;
    selectedMood = null;
}

// Quote Funktionen
function loadNewQuote() {
    const randomQuote = quotes[Math.floor(Math.random() * quotes.length)];
    document.getElementById('motivation-quote').textContent = randomQuote.text;
    document.getElementById('motivation-author').textContent = `— ${randomQuote.author}`;
}

// Initialisierung
document.addEventListener('DOMContentLoaded', function() {
    // Bestehende Initialisierung bleibt...
    
    // Neue Initialisierung
    generateCalendar(currentMonth, currentYear);
    loadNewQuote();
    
    // Zufällige Verzögerung für staggered Animationen
    document.querySelectorAll('.widget-grid > *').forEach((widget, index) => {
        widget.style.animationDelay = `${index * 0.1}s`;
    });
});

// Globale Funktionen verfügbar machen
window.openAddGradeModal = openAddGradeModal;
window.closeAddGradeModal = closeAddGradeModal;
window.addGrade = addGrade;
window.nextStep = nextStep;
window.previousStep = previousStep;

window.completeReflection = completeReflection;
window.changeMonth = changeMonth;
window.selectMood = selectMood;
window.submitMoodCheckin = submitMoodCheckin;
window.loadNewQuote = loadNewQuote;




// Stundenplan Definition (anpassbar)
const timetable = {
    monday: [
        { subject: "Mathematik", time: "08:00-08:45", room: "Raum 201" },
        { subject: "Mathematik", time: "08:50-09:35", room: "Raum 201" },
        { subject: "Pause", time: "09:35-09:55", room: "Pausenhof" },
        { subject: "Englisch", time: "09:55-10:40", room: "Raum 302" },
        { subject: "Geschichte", time: "10:45-11:30", room: "Raum 203" },
        { subject: "Pause", time: "11:30-11:45", room: "Pausenhof" },
        { subject: "Chemie", time: "11:45-12:30", room: "Labor" },
        { subject: "Chemie", time: "12:35-13:20", room: "Labor" }
    ],
    tuesday: [
        { subject: "Deutsch", time: "08:00-08:45", room: "Raum 105" },
        { subject: "Deutsch", time: "08:50-09:35", room: "Raum 105" },
        { subject: "Pause", time: "09:35-09:55", room: "Pausenhof" },
        { subject: "Biologie", time: "09:55-10:40", room: "Raum 501" },
        { subject: "Biologie", time: "10:45-11:30", room: "Raum 501" },
        { subject: "Pause", time: "11:30-11:45", room: "Pausenhof" },
        { subject: "Mathematik", time: "11:45-12:30", room: "Raum 201" },
        { subject: "Englisch", time: "12:35-13:20", room: "Raum 302" }
    ],
    wednesday: [
        { subject: "Englisch", time: "08:00-08:45", room: "Raum 302" },
        { subject: "Geschichte", time: "08:50-09:35", room: "Raum 203" },
        { subject: "Pause", time: "09:35-09:55", room: "Pausenhof" },
        { subject: "Mathematik", time: "09:55-10:40", room: "Raum 201" },
        { subject: "Mathematik", time: "10:45-11:30", room: "Raum 201" },
        { subject: "Pause", time: "11:30-11:45", room: "Pausenhof" },
        { subject: "Deutsch", time: "11:45-12:30", room: "Raum 105" },
        { subject: "Deutsch", time: "12:35-13:20", room: "Raum 105" }
    ],
    thursday: [
        { subject: "Physik", time: "08:00-08:45", room: "Raum 401" },
        { subject: "Physik", time: "08:50-09:35", room: "Raum 401" },
        { subject: "Pause", time: "09:35-09:55", room: "Pausenhof" },
        { subject: "Deutsch", time: "09:55-10:40", room: "Raum 105" },
        { subject: "Englisch", time: "10:45-11:30", room: "Raum 302" },
        { subject: "Pause", time: "11:30-11:45", room: "Pausenhof" },
        { subject: "Geschichte", time: "11:45-12:30", room: "Raum 203" }
    ],
    friday: [
        { subject: "Sport", time: "08:00-08:45", room: "Turnhalle" },
        { subject: "Sport", time: "08:50-09:35", room: "Turnhalle" },
        { subject: "Pause", time: "09:35-09:55", room: "Pausenhof" },
        { subject: "Musik", time: "09:55-10:40", room: "Musikraum" },
        { subject: "Kunst", time: "10:45-11:30", room: "Kunstraum" }
    ]
};

const dayNames = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];

function updateCurrentTime() {
    const now = new Date();
    const timeString = now.toTimeString().substring(0, 5);
    document.getElementById('current-time').textContent = timeString;
}

function parseTime(timeString) {
    const [start, end] = timeString.split('-');
    const [startHour, startMin] = start.split(':').map(Number);
    const [endHour, endMin] = end.split(':').map(Number);
    
    return {
        start: new Date(0, 0, 0, startHour, startMin),
        end: new Date(0, 0, 0, endHour, endMin)
    };
}

function findNextLesson() {
    const now = new Date();
    const currentTime = new Date(0, 0, 0, now.getHours(), now.getMinutes());
    const today = dayNames[now.getDay()];
    
    // Wenn Wochenende, zeige Montag
    if (today === 'saturday' || today === 'sunday') {
        const mondaySchedule = timetable.monday;
        if (mondaySchedule && mondaySchedule.length > 0) {
            return {
                lesson: mondaySchedule[0],
                status: 'next-day',
                timeUntil: 'Am Montag'
            };
        }
    }
    
    const todaySchedule = timetable[today];
    if (!todaySchedule) return null;
    
    // Finde aktuelle oder nächste Stunde
    for (let i = 0; i < todaySchedule.length; i++) {
        const lesson = todaySchedule[i];
        const times = parseTime(lesson.time);
        
        // Aktuelle Stunde
        if (currentTime >= times.start && currentTime < times.end) {
            const remaining = times.end.getTime() - currentTime.getTime();
            const minutesLeft = Math.ceil(remaining / (1000 * 60));
            
            return {
                lesson: lesson,
                status: lesson.subject === 'Pause' ? 'break' : 'current',
                timeUntil: `Noch ${minutesLeft} min`,
                progress: ((currentTime.getTime() - times.start.getTime()) / (times.end.getTime() - times.start.getTime())) * 100
            };
        }
        
        // Nächste Stunde
        if (currentTime < times.start) {
            const timeUntil = times.start.getTime() - currentTime.getTime();
            const hoursUntil = Math.floor(timeUntil / (1000 * 60 * 60));
            const minutesUntil = Math.floor((timeUntil % (1000 * 60 * 60)) / (1000 * 60));
            
            let timeText = '';
            if (hoursUntil > 0) {
                timeText = `${hoursUntil}h ${minutesUntil}min`;
            } else {
                timeText = `${minutesUntil} min`;
            }
            
            return {
                lesson: lesson,
                status: 'upcoming',
                timeUntil: timeText,
                progress: 0
            };
        }
    }
    
    // Schule ist vorbei - zeige nächsten Tag
    const tomorrow = new Date(now);
    tomorrow.setDate(tomorrow.getDate() + 1);
    const tomorrowDay = dayNames[tomorrow.getDay()];
    
    if (timetable[tomorrowDay] && timetable[tomorrowDay].length > 0) {
        return {
            lesson: timetable[tomorrowDay][0],
            status: 'next-day',
            timeUntil: 'Morgen'
        };
    }
    
    return {
        lesson: { subject: 'Schulende', time: 'Schönes Wochenende!', room: '🎉' },
        status: 'school-end',
        timeUntil: 'Bis Montag!'
    };
}

function updateNextLessonDisplay() {
    const nextLesson = findNextLesson();
    if (!nextLesson) return;
    
    const lessonInfo = document.getElementById('next-lesson-info');
    const subjectEl = document.getElementById('lesson-subject');
    const timeEl = document.getElementById('lesson-time');
    const roomEl = document.getElementById('lesson-room');
    const countdownEl = document.getElementById('lesson-countdown');
    const progressEl = document.getElementById('lesson-progress-fill');
    const progressTextEl = document.getElementById('lesson-progress-text');
    
    // Update content
    subjectEl.textContent = nextLesson.lesson.subject;
    timeEl.textContent = nextLesson.lesson.time;
    roomEl.textContent = nextLesson.lesson.room;
    countdownEl.querySelector('.countdown-time').textContent = nextLesson.timeUntil;
    
    // Update status classes
    lessonInfo.className = 'lesson-info';
    if (nextLesson.status === 'current') {
        lessonInfo.classList.add('current-lesson');
        countdownEl.querySelector('.countdown-text').textContent = 'Endet in';
    } else if (nextLesson.status === 'break') {
        lessonInfo.classList.add('break-time');
        countdownEl.querySelector('.countdown-text').textContent = 'Endet in';
    } else if (nextLesson.status === 'school-end') {
        lessonInfo.classList.add('school-end');
        countdownEl.querySelector('.countdown-text').textContent = 'Schönes Wochenende!';
    } else {
        countdownEl.querySelector('.countdown-text').textContent = 'Beginnt in';
    }
    
    // Update progress
    if (nextLesson.progress !== undefined) {
        progressEl.style.width = `${nextLesson.progress}%`;
        progressTextEl.textContent = `${Math.round(100 - nextLesson.progress)}% verbleibend`;
    } else {
        progressEl.style.width = '0%';
        progressTextEl.textContent = 'Bereit für die nächste Stunde';
    }
}

// Quick Action Functions (zum Anpassen)
function markAttendance() {
    showNotification('Anwesenheit markiert! +2 Trophäen');
    // Hier deine Logik für Anwesenheit
}

function openLessonNotes() {
    showNotification('Notizen geöffnet');
    // Hier deine Logik für Notizen
}

function ratePreviousLesson() {
    // Hier deine Logik für Stundenbewertung - vermutlich zur Reflexion weiterleiten
    showNotification('Zur Stundenbewertung weitergeleitet');
}

// Hilfsfunktion für Benachrichtigungen (falls nicht vorhanden)
function showNotification(message) {
    // Falls du bereits eine showNotification Funktion hast, nutze diese
    // Ansonsten einfache Alert-Alternative:
    if (typeof window.showNotification === 'function') {
        window.showNotification(message);
    } else {
        console.log('Notification:', message);
        // Oder verwende deine bestehende Notification-Logik
    }
}

// Initialisierung und Updates
function initNextLessonWidget() {
    updateCurrentTime();
    updateNextLessonDisplay();
    
    // Update alle 5 Sekunden
    setInterval(() => {
        updateCurrentTime();
        updateNextLessonDisplay();
    }, 5000);
}

// Starte Widget wenn DOM geladen ist
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initNextLessonWidget);
} else {
    initNextLessonWidget();
}














// Anwesenheitssystem für SchoolUp

// 1. Erweitere dein appState Objekt um Anwesenheitsdaten
appState.attendance = {
    currentStatus: 'unbekannt', // 'anwesend', 'abwesend', 'verspätet'
    lastUpdated: null,
    history: []
};

// 2. Simuliere Lehrer-Interface (normalerweise würde das über eine separate Lehrer-App laufen)
const teacherInterface = {
    students: [
        { id: 'max_mustermann', name: 'Max Mustermann' },
        // Weitere Schüler...
    ],
    
    // Funktion für Lehrer um Anwesenheit zu setzen
    setAttendance: function(studentId, status) {
        // In echter App würde das an den Server gehen
        const attendanceData = {
            studentId: studentId,
            status: status, // 'anwesend', 'abwesend', 'verspätet'
            timestamp: new Date(),
            lesson: getCurrentLesson()
        };
        
        // Simuliere Server-Update
        updateStudentAttendance(attendanceData);
    }
};

// 3. Funktion um aktuelle Stunde zu ermitteln
function getCurrentLesson() {
    const now = new Date();
    const currentTime = new Date(0, 0, 0, now.getHours(), now.getMinutes());
    const today = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'][now.getDay()];
    
    const todaySchedule = timetable[today];
    if (!todaySchedule) return null;
    
    for (let lesson of todaySchedule) {
        if (lesson.subject === 'Pause') continue;
        
        const [start, end] = lesson.time.split('-');
        const [startHour, startMin] = start.split(':').map(Number);
        const [endHour, endMin] = end.split(':').map(Number);
        
        const startTime = new Date(0, 0, 0, startHour, startMin);
        const endTime = new Date(0, 0, 0, endHour, endMin);
        
        if (currentTime >= startTime && currentTime <= endTime) {
            return {
                subject: lesson.subject,
                time: lesson.time,
                room: lesson.room
            };
        }
    }
    
    return null;
}

// 4. Funktion um Schüler-Anwesenheit zu aktualisieren (wird vom "Server" aufgerufen)
function updateStudentAttendance(attendanceData) {
    // Nur für den aktuellen Schüler (Max Mustermann)
    if (attendanceData.studentId === 'max_mustermann') {
        appState.attendance.currentStatus = attendanceData.status;
        appState.attendance.lastUpdated = attendanceData.timestamp;
        appState.attendance.history.push(attendanceData);
        
        // UI Updates
        updateAttendanceDisplay();
        updateQuickActions();
        showAttendanceNotification(attendanceData.status);
    }
}

// 5. UI Update Funktionen
function updateAttendanceDisplay() {
    const status = appState.attendance.currentStatus;
    const quickActionBtns = document.querySelectorAll('.quick-action-btn');
    
    // Reset alle Button-Styles
    quickActionBtns.forEach(btn => {
        btn.classList.remove('Anwesend', 'Abwesend', 'Late');
    });
    
    // Markiere aktuellen Status
    quickActionBtns.forEach(btn => {
        const btnText = btn.textContent.trim();
        
        if (status === 'anwesend' && btnText.includes('Anwesend')) {
            btn.classList.add('Anwesend');
            btn.innerHTML = '✅ Anwesend';
        } else if (status === 'abwesend' && btnText.includes('Abwesend')) {
            btn.classList.add('Abwesend');
            btn.innerHTML = '❌ Abwesend';
        } else if (status === 'verspätet' && btnText.includes('Verspätet')) {
            btn.classList.add('Late');
            btn.innerHTML = '🕗 Verspätet';
        }
    });
}''

function updateQuickActions() {
    const quickActionsContainer = document.querySelector('.quick-actions');
    if (!quickActionsContainer) return;
    
    const status = appState.attendance.currentStatus;
    const lesson = getCurrentLesson();
    
    if (!lesson) {
        quickActionsContainer.innerHTML = `
            <div style="text-align: center; color: #64748b; font-style: italic;">
                Keine aktuelle Stunde
            </div>
        `;
        return;
    }
    
    // Zeige Anwesenheitsstatus und andere Aktionen
    quickActionsContainer.innerHTML = `
        <div class="attendance-status-display">
            <div style="text-align: center; margin-bottom: 1rem;">
                <div style="font-size: 0.9rem; color: #64748b; margin-bottom: 0.5rem;">
                    Dein Status für ${lesson.subject}:
                </div>
                <div class="current-status ${status}" id="attendance-status-display">
                    ${getStatusDisplay(status)}
                </div>
            </div>
        </div>
        <button class="quick-action-btn" onclick="openLessonNotes()">
            📝 Notizen
        </button>
        <button class="quick-action-btn" onclick="ratePreviousLesson()">
            ⭐ Bewerten
        </button>
    `;
}

function getStatusDisplay(status) {
    switch(status) {
        case 'anwesend':
            return '<span style="color: #16a34a; font-weight: bold;">✅ Anwesend</span>';
        case 'abwesend':
            return '<span style="color: #dc2626; font-weight: bold;">❌ Abwesend</span>';
        case 'verspätet':
            return '<span style="color: #f59e0b; font-weight: bold;">🕗 Verspätet</span>';
        default:
            return '<span style="color: #64748b;">⏳ Wird erfasst...</span>';
    }
}

function showAttendanceNotification(status) {
    let message = '';
    switch(status) {
        case 'anwesend':
            message = '✅ Du wurdest als anwesend markiert!';
            break;
        case 'abwesend':
            message = '❌ Du wurdest als abwesend markiert.';
            break;
        case 'verspätet':
            message = '🕗 Du wurdest als verspätet markiert.';
            break;
    }
    
    if (message && typeof showNotification === 'function') {
        showNotification(message);
    }
}

// 6. Simuliere Lehrer-Eingaben (für Testing)
function simulateTeacherActions() {
    // Simuliere verschiedene Szenarien
    
    setTimeout(() => {
        teacherInterface.setAttendance('max_mustermann', 'anwesend');
    }, 2000); // Nach 2 Sekunden: Anwesend
    
    setTimeout(() => {
        teacherInterface.setAttendance('max_mustermann', 'verspätet');
    }, 10000); // Nach 10 Sekunden: Verspätet
    
    setTimeout(() => {
        teacherInterface.setAttendance('max_mustermann', 'abwesend');
    }, 20000); // Nach 20 Sekunden: Abwesend
}

// 7. Initialisierung
document.addEventListener('DOMContentLoaded', function() {
    // Bestehende Initialisierung...
    
    // Anwesenheitssystem initialisieren
    updateAttendanceDisplay();
    updateQuickActions();
    
    // Für Demo: Simuliere Lehrer-Aktionen
    // In echter App würden die Updates vom Server kommen
    // simulateTeacherActions();
    
    // Aktualisiere Anwesenheit regelmäßig (für Real-Time Updates)
    setInterval(() => {
        updateQuickActions();
    }, 5000); // Alle 30 Sekunden
});

// 8. Export für globale Nutzung
window.teacherInterface = teacherInterface;
window.updateStudentAttendance = updateStudentAttendance;



// Mobile Bottom Navigation Handler
document.addEventListener('DOMContentLoaded', function() {
    const mobileNavItems = document.querySelectorAll('.mobile-nav-item');
    
    mobileNavItems.forEach(item => {
        item.addEventListener('click', function() {
            const targetView = this.getAttribute('data-view');
            
            // Remove active from all items
            mobileNavItems.forEach(nav => nav.classList.remove('active'));
            
            // Add active to clicked item
            this.classList.add('active');
            
            // Show target view (reuse existing function)
            showView(targetView);
        });
    });
});
// Mobile Bottom Navigation Handler
document.addEventListener('DOMContentLoaded', function() {
    const mobileNavItems = document.querySelectorAll('.mobile-nav-item');
    
    mobileNavItems.forEach(item => {
        item.addEventListener('click', function() {
            const targetView = this.getAttribute('data-view');
            
            // Remove active from all mobile nav items
            mobileNavItems.forEach(nav => nav.classList.remove('active'));
            
            // Add active to clicked item
            this.classList.add('active');
            
            // Remove active from desktop nav items
            document.querySelectorAll('.nav-button').forEach(nav => nav.classList.remove('active'));
            
            // Hide all views
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
                view.style.display = 'none';
            });
            
            // Show target view
            const targetElement = document.getElementById(targetView);
            if (targetElement) {
                targetElement.classList.add('active');
                targetElement.style.display = 'block';
            }
        });
    });
});
    </script>
    
    
    
    
    <!-- Mobile Bottom Navigation -->
<div class="mobile-bottom-nav">
    <div class="mobile-nav-container">
        <button class="mobile-nav-item" data-view="Stundenplan">
            <div class="mobile-nav-icon">idk</div>
            <div class="mobile-nav-label">Reflection</div>
        </button>
        
        <button class="mobile-nav-item" data-view="timetable">
            <div class="mobile-nav-icon">🗓</div>
            <div class="mobile-nav-label">Stundeplan</div>
        </button>
        
        <button class="mobile-nav-item home active" data-view="dashboard">
            <div class="mobile-nav-icon">🏠</div>
            <div class="mobile-nav-label">Home</div>
        </button>
        
        <button class="mobile-nav-item" data-view="Lernecke">
            <div class="mobile-nav-icon">🧠</div>
            <div class="mobile-nav-label">Lernecke</div>
        </button>
        
                <button class="mobile-nav-item" data-view="profile">
            <div class="mobile-nav-icon">📚</div>
            <div class="mobile-nav-label">Profil</div>
        </button>
    </div>
</div>
</body>
</html>